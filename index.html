<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>Tech Support Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- SDKs -->
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script><!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
      body {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
      }
      * {
        box-sizing: border-box;
      }
      /* Custom scrollbar for chat - now visible and styled */
      .cc-scroll::-webkit-scrollbar {
        width: 12px;
      }
      .cc-scroll::-webkit-scrollbar-track {
        background: #0f3460;
        border-radius: 10px;
      }
      .cc-scroll::-webkit-scrollbar-thumb {
        background-color: #533483;
        border-radius: 10px;
        border: 2px solid #0f3460;
      }
      .cc-scroll::-webkit-scrollbar-thumb:hover {
        background-color: #6d44a8;
      }
      /* Firefox scrollbar */
      .cc-scroll {
        scrollbar-width: auto;
        scrollbar-color: #533483 #0f3460;
      }

      @keyframes cc-slide-in {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .cc-message-anim {
        animation: cc-slide-in 0.25s ease-out;
      }

      /* Focus ring for accessibility */
      .cc-focus-visible:focus-visible {
        outline: 2px solid #e94560;
        outline-offset: 2px;
      }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div class="h-full flex flex-col bg-[#1a1a2e]">
   <header class="flex-shrink-0 border-b-2 border-[#e94560] bg-[#0f3460] text-[#e94560]" role="banner">
    <div class="max-w-5xl mx-auto px-6 py-4 flex items-center justify-between gap-4">
     <div class="flex items-center gap-3"><button id="cc-back-btn" type="button" class="cc-focus-visible hidden items-center justify-center h-9 w-9 rounded-full bg-[#533483] hover:bg-[#6d44a8] text-white transition" aria-label="Go back to welcome screen"> â† </button>
      <h1 id="cc-main-title" class="text-xl font-semibold">Tech Support Assistant</h1>
     </div>
     <div class="inline-flex items-center gap-2 text-xs text-white/80 bg-[#16213e] px-3 py-1.5 rounded-full"><span class="inline-flex h-2 w-2 rounded-full bg-[#22c55e]" aria-hidden="true"></span> <span>Online helper</span>
     </div>
    </div>
   </header>
   <main class="flex-1 min-h-0 flex flex-col" role="main">
    <section aria-label="Chat conversation" class="flex-1 min-h-0 overflow-hidden">
     <div id="cc-chat-container" class="cc-scroll max-w-5xl mx-auto px-6 py-6 flex flex-col gap-4 overflow-y-auto"><!-- Welcome block (hidden after first real message) -->
      <article id="cc-welcome" class="text-center text-white max-w-xl mx-auto mt-6 bg-[#16213e]/70 rounded-2xl px-6 py-8 shadow-lg">
       <h2 id="cc-welcome-title" class="text-2xl font-semibold text-[#e94560] mb-2">Hi, I'm your tech assistant ğŸ”§</h2>
       <p id="cc-welcome-body" class="text-sm text-white/80 mb-4 leading-relaxed">Describe what's going wrong with your computer, phone, or apps, and I'll walk you through simple, stepâ€‘byâ€‘step fixes.</p>
       <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 text-left text-xs" aria-label="Quick help categories"><button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My Wiâ€‘Fi keeps disconnecting every few minutes"> ğŸ›œ Wiâ€‘Fi Drops </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My computer takes forever to start up"> ğŸ–¥ï¸ Slow Startup </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My email won't send messages"> ğŸ“§ Email Won't Send </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My app closes by itself"> âš™ï¸ App Crashes </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My printer won't print"> ğŸ–¨ï¸ Printer Issues </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My screen is completely frozen"> ğŸ”’ Frozen Screen </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I forgot my password and can't log in"> ğŸ”‘ Forgot Password </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My phone battery dies too fast"> ğŸ”‹ Battery Drains </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I'm getting a blue screen error on Windows"> ğŸ’™ Blue Screen </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I can't hear any sound from my computer"> ğŸ”Š No Sound </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My webcam shows a black screen"> ğŸ“· Camera Black </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My Bluetooth headphones won't pair"> ğŸ“¡ Bluetooth Pairing </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My keyboard keys aren't working"> âŒ¨ï¸ Keyboard Issues </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My computer says storage is full"> ğŸ’¾ Storage Full </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="Software won't install on my computer"> ğŸ“¦ Can't Install </button>
       </div>
      </article><!-- Initial assistant message -->
      <div class="flex items-start gap-3 max-w-xl cc-message-anim" data-role="assistant-message">
       <div class="message-avatar flex items-center justify-center h-9 w-9 rounded-full bg-[#533483] text-white text-lg flex-shrink-0" aria-hidden="true">
        ğŸ¤–
       </div>
       <div class="flex-1">
        <div class="message-content bg-[#0f3460] text-white rounded-2xl rounded-bl-sm px-4 py-3 text-sm leading-relaxed">
         <p>I'm here to help you fix tech problems. Just tell me what's wrong in simple words, and I'll give you easy steps to follow.</p>
        </div>
        <p class="message-time text-[11px] text-white/60 mt-1">Assistant Â· just now</p>
       </div>
      </div>
     </div>
    </section>
    <section aria-label="Ask a tech support question" class="flex-shrink-0 border-t-2 border-[#533483] bg-[#0f3460]">
     <div class="max-w-5xl mx-auto px-6 py-4 space-y-2">
      <form id="cc-input-form" class="w-full" novalidate>
       <div class="flex items-end gap-3">
        <div class="flex-1"><label for="cc-input" class="block text-xs font-medium text-white/70 mb-1">Type your tech question</label>
         <div class="flex items-center gap-2 bg-[#1a1a2e] border-2 border-[#533483] rounded-full px-4 py-2.5 focus-within:border-[#e94560] transition"><textarea id="cc-input" rows="1" class="input-field block w-full bg-transparent border-none outline-none text-sm text-white placeholder:text-white/40 resize-none" placeholder="Ask a question about your device, app, or setup..."></textarea>
         </div>
        </div><button id="cc-send-btn" type="submit" class="cc-focus-visible inline-flex items-center justify-center bg-[#e94560] hover:bg-[#f25b72] text-white font-semibold text-sm px-5 py-2.5 rounded-full whitespace-nowrap transition disabled:opacity-60 disabled:cursor-not-allowed"> <span id="cc-send-text">Send</span> <span id="cc-send-spinner" class="hidden ml-2 h-4 w-4 border-2 border-white/40 border-t-white rounded-full animate-spin" aria-hidden="true"></span> </button>
       </div>
      </form>
      <p id="cc-footer-text" class="text-[11px] text-white/50 text-left">Responses are suggestions only. For sensitive systems, confirm steps with your IT team first.</p>
      <p id="cc-error" class="hidden text-xs text-[#fed7d7] bg-[#7f1d1d]/60 border border-[#fecaca] rounded-md px-3 py-1.5"></p>
     </div>
    </section>
   </main>
  </div>
  <script>
      // --- Comprehensive tech support with specific problem detection ---

      const chatContainer = document.getElementById("cc-chat-container");
      const inputForm = document.getElementById("cc-input-form");
      const inputField = document.getElementById("cc-input");
      const sendBtn = document.getElementById("cc-send-btn");
      const sendText = document.getElementById("cc-send-text");
      const sendSpinner = document.getElementById("cc-send-spinner");
      const errorBox = document.getElementById("cc-error");
      const welcomeBlock = document.getElementById("cc-welcome");
      const backBtn = document.getElementById("cc-back-btn");

      const welcomeTitleEl = document.getElementById("cc-welcome-title");
      const welcomeBodyEl = document.getElementById("cc-welcome-body");
      const mainTitleEl = document.getElementById("cc-main-title");
      const footerTextEl = document.getElementById("cc-footer-text");

      function showError(message) {
        if (!errorBox) return;
        errorBox.textContent = message;
        errorBox.classList.remove("hidden");
        setTimeout(() => {
          errorBox.classList.add("hidden");
        }, 3000);
      }

      function setSending(isSending) {
        if (!sendBtn) return;
        sendBtn.disabled = isSending;
        if (isSending) {
          sendSpinner.classList.remove("hidden");
        } else {
          sendSpinner.classList.add("hidden");
        }
      }

      function addMessage(role, text) {
        if (!chatContainer) return;

        if (welcomeBlock && !welcomeBlock.classList.contains("hidden")) {
          welcomeBlock.classList.add("hidden");
          if (backBtn) {
            backBtn.classList.remove("hidden");
            backBtn.classList.add("flex");
          }
        }

        const wrapper = document.createElement("div");
        wrapper.className =
          "flex items-start gap-3 max-w-xl cc-message-anim " +
          (role === "user" ? "ml-auto flex-row-reverse" : "");
        wrapper.setAttribute("data-role", role + "-message");

        const avatar = document.createElement("div");
        avatar.className =
          "message-avatar flex items-center justify-center h-9 w-9 rounded-full text-white text-lg flex-shrink-0 " +
          (role === "user" ? "bg-[#e94560]" : "bg-[#533483]");
        avatar.textContent = role === "user" ? "ğŸ‘¤" : "ğŸ¤–";

        const body = document.createElement("div");
        body.className = "flex-1";

        const bubble = document.createElement("div");
        bubble.className =
          "message-content text-white rounded-2xl px-4 py-3 text-sm leading-relaxed " +
          (role === "user"
            ? "bg-[#e94560] rounded-br-sm"
            : "bg-[#0f3460] rounded-bl-sm");
        
        // Format text with line breaks
        const lines = text.split('\n');
        lines.forEach((line, index) => {
          if (line.trim()) {
            const p = document.createElement('p');
            p.textContent = line;
            if (index > 0) p.className = 'mt-2';
            bubble.appendChild(p);
          }
        });

        const time = document.createElement("p");
        time.className = "message-time text-[11px] text-white/60 mt-1";
        const timestamp = new Date();
        const minutes = timestamp.getMinutes().toString().padStart(2, "0");
        const hours = timestamp.getHours().toString().padStart(2, "0");
        time.textContent =
          (role === "user" ? "You" : "Assistant") + " Â· " + hours + ":" + minutes;

        body.appendChild(bubble);
        body.appendChild(time);
        wrapper.appendChild(avatar);
        wrapper.appendChild(body);

        chatContainer.appendChild(wrapper);
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }

      function generateAssistantReply(message) {
        const lower = message.toLowerCase();

        // VERY SPECIFIC WI-FI ISSUES
        if (lower.includes("wifi keeps disconnecting") || lower.includes("wi-fi drops") || lower.includes("connection drops") || lower.includes("keeps losing connection")) {
          return "Your Wi-Fi keeps dropping? Here's the fix:\n\n1ï¸âƒ£ Move closer to your router. Walls block the signal.\n\n2ï¸âƒ£ Unplug your router, wait 30 seconds, plug it back in. Wait 3 minutes.\n\n3ï¸âƒ£ On your device, turn Wi-Fi off, wait 5 seconds, turn it back on.\n\n4ï¸âƒ£ Too many devices? Turn off Wi-Fi on devices you're not using.\n\n5ï¸âƒ£ Check if your router is overheating. Make sure it has space around it for air.\n\n6ï¸âƒ£ Update your router's software (check the manual or call your internet provider).";
        }

        if (lower.includes("wifi connected but no internet") || lower.includes("connected but can't browse") || lower.includes("no internet access")) {
          return "Connected to Wi-Fi but can't open websites? Try this:\n\n1ï¸âƒ£ Unplug your router for 30 seconds, then plug it back in.\n\n2ï¸âƒ£ On your device, turn Wi-Fi off and back on.\n\n3ï¸âƒ£ Try opening a different website - maybe just that one site is down.\n\n4ï¸âƒ£ Check if other devices can access the internet. If not, call your internet provider.\n\n5ï¸âƒ£ Restart your device completely.";
        }

        if ((lower.includes("wrong password") || lower.includes("incorrect password")) && (lower.includes("wifi") || lower.includes("wi-fi"))) {
          return "Wi-Fi password not working?\n\n1ï¸âƒ£ Check if Caps Lock is ON. Passwords care about capital letters.\n\n2ï¸âƒ£ Look at your router - there's usually a sticker on the bottom or back with the password.\n\n3ï¸âƒ£ Type the password in Notes first so you can see it, then copy and paste it.\n\n4ï¸âƒ£ Make sure you're typing the exact password - no extra spaces.\n\n5ï¸âƒ£ If someone changed it, ask them for the new password.";
        }

        if (lower.includes("wifi slow") || lower.includes("internet slow") || lower.includes("slow connection")) {
          return "Internet running slow?\n\n1ï¸âƒ£ Move closer to your router.\n\n2ï¸âƒ£ Close apps and browser tabs you're not using.\n\n3ï¸âƒ£ Restart your router - unplug for 30 seconds.\n\n4ï¸âƒ£ Check how many devices are using Wi-Fi. Each one slows it down.\n\n5ï¸âƒ£ Run a speed test (search 'speed test' on Google). If it's much slower than what you pay for, call your provider.";
        }

        // General Wi-Fi
        if (lower.includes("wifi") || lower.includes("wi-fi") || lower.includes("internet") || lower.includes("connection") || lower.includes("network") || lower.includes("online")) {
          return "Internet not working? Let's fix it:\n\n1ï¸âƒ£ Check if other devices have internet. If nothing works, it's your router or internet provider.\n\n2ï¸âƒ£ Unplug your router for 30 seconds, plug it back in, wait 3 minutes.\n\n3ï¸âƒ£ On your device, turn Wi-Fi off and back on.\n\n4ï¸âƒ£ Move closer to the router.\n\n5ï¸âƒ£ Restart your device.\n\n6ï¸âƒ£ If still not working, call your internet provider.";
        }

        // VERY SPECIFIC SLOW COMPUTER ISSUES
        if (lower.includes("slow startup") || lower.includes("takes forever to start") || lower.includes("slow boot") || lower.includes("long to start")) {
          return "Computer takes forever to start?\n\n1ï¸âƒ£ Too many programs start automatically. Stop them:\n   â€¢ Windows: Press Ctrl+Shift+Esc, click 'Startup', turn off programs you don't need\n   â€¢ Mac: Apple menu > System Preferences > Users & Groups > Login Items, remove programs\n\n2ï¸âƒ£ Restart your computer.\n\n3ï¸âƒ£ Make sure you have free space on your hard drive (at least 15%).\n\n4ï¸âƒ£ Update Windows or macOS.\n\n5ï¸âƒ£ If it's still slow, your hard drive might be old and needs replacing.";
        }

        if (lower.includes("browser slow") || lower.includes("chrome slow") || lower.includes("firefox slow") || lower.includes("edge slow") || lower.includes("safari slow")) {
          return "Browser running slow?\n\n1ï¸âƒ£ Close tabs you're not using. Each tab uses memory.\n\n2ï¸âƒ£ Clear your browsing history:\n   â€¢ Press Ctrl+Shift+Delete (or Cmd+Shift+Delete on Mac)\n   â€¢ Select 'All time'\n   â€¢ Check 'Cookies' and 'Cached images'\n   â€¢ Click 'Clear data'\n\n3ï¸âƒ£ Turn off extensions you don't use (click the puzzle piece icon).\n\n4ï¸âƒ£ Update your browser.\n\n5ï¸âƒ£ Close the browser completely and reopen it.";
        }

        if (lower.includes("100% disk") || lower.includes("disk usage") || lower.includes("disk at 100")) {
          return "Hard drive at 100%? This makes everything slow:\n\n1ï¸âƒ£ Restart your computer first.\n\n2ï¸âƒ£ Press Ctrl+Shift+Esc, click the 'Disk' column to see what's using it.\n\n3ï¸âƒ£ Update Windows (Settings > Update & Security > Check for updates).\n\n4ï¸âƒ£ Run a virus scan with Windows Defender.\n\n5ï¸âƒ£ If it keeps happening, your hard drive might be failing - back up your important files now.";
        }

        if (lower.includes("fan loud") || lower.includes("fan noise") || lower.includes("loud fan")) {
          return "Computer fan really loud?\n\n1ï¸âƒ£ Close programs you're not using - they make the computer work hard.\n\n2ï¸âƒ£ Make sure air vents aren't blocked. Don't use laptop on bed or couch.\n\n3ï¸âƒ£ Clean dust from vents with compressed air (buy at any store).\n\n4ï¸âƒ£ Put your laptop on a hard, flat surface.\n\n5ï¸âƒ£ If it's always loud, the fan might need replacing.";
        }

        // General Slow Computer
        if (lower.includes("slow") || lower.includes("lag") || lower.includes("performance") || lower.includes("sluggish")) {
          return "Computer running slow?\n\n1ï¸âƒ£ Close programs you're not using.\n\n2ï¸âƒ£ Restart your computer. This fixes most slowness.\n\n3ï¸âƒ£ Check your storage - you need at least 15% free space. Delete old files.\n\n4ï¸âƒ£ Stop programs from starting automatically:\n   â€¢ Windows: Ctrl+Shift+Esc > Startup\n   â€¢ Mac: System Preferences > Users & Groups > Login Items\n\n5ï¸âƒ£ Update your computer (Windows Update or Mac Software Update).\n\n6ï¸âƒ£ Run a virus scan.";
        }

        // VERY SPECIFIC EMAIL ISSUES
        if (lower.includes("email won't send") || lower.includes("can't send email") || lower.includes("email stuck")) {
          return "Can't send emails?\n\n1ï¸âƒ£ Check your internet connection - try opening a website.\n\n2ï¸âƒ£ Check your Outbox folder - delete any stuck messages there.\n\n3ï¸âƒ£ Make sure the email address you're sending to is typed correctly.\n\n4ï¸âƒ£ Check if your email is full - delete old emails to make space.\n\n5ï¸âƒ£ Sign out of your email and sign back in.\n\n6ï¸âƒ£ If you changed your password recently, update it in your email app.";
        }

        if (lower.includes("email won't receive") || lower.includes("not receiving email") || lower.includes("emails not coming")) {
          return "Not receiving emails?\n\n1ï¸âƒ£ Check your Spam or Junk folder - emails might be there.\n\n2ï¸âƒ£ Check if your inbox is full - delete old emails.\n\n3ï¸âƒ£ Make sure you're connected to the internet.\n\n4ï¸âƒ£ Try sending yourself an email to test.\n\n5ï¸âƒ£ Sign out and sign back in.\n\n6ï¸âƒ£ Check if the sender's email address is blocked.";
        }

        if (lower.includes("forgot email password") || lower.includes("can't log into email")) {
          return "Can't log into your email?\n\n1ï¸âƒ£ Click 'Forgot Password' on the login page.\n\n2ï¸âƒ£ Check your phone for a text message with a code.\n\n3ï¸âƒ£ Check your backup email for a reset link.\n\n4ï¸âƒ£ Try your old passwords - you might remember one.\n\n5ï¸âƒ£ For Gmail: Go to google.com/accounts/recovery\n   For Outlook: Go to account.live.com/password/reset";
        }

        // General Email
        if (lower.includes("email") || lower.includes("outlook") || lower.includes("gmail") || lower.includes("mail")) {
          return "Email problem? Let's fix it:\n\n1ï¸âƒ£ Check your internet connection.\n\n2ï¸âƒ£ Check your Spam/Junk folder.\n\n3ï¸âƒ£ Sign out and sign back in.\n\n4ï¸âƒ£ Make sure your device's date and time are correct.\n\n5ï¸âƒ£ Update your email app.\n\n6ï¸âƒ£ Try accessing email through a web browser instead of the app.";
        }

        // VERY SPECIFIC APP CRASH ISSUES
        if (lower.includes("app closes by itself") || lower.includes("app keeps closing") || lower.includes("app shuts down")) {
          return "App keeps closing by itself?\n\n1ï¸âƒ£ Close the app completely (don't just minimize it) and open it again.\n\n2ï¸âƒ£ Restart your device.\n\n3ï¸âƒ£ Update the app (check your app store).\n\n4ï¸âƒ£ Clear the app's cache:\n   â€¢ iPhone: Delete and reinstall the app\n   â€¢ Android: Settings > Apps > [App name] > Clear cache\n\n5ï¸âƒ£ Make sure you have enough storage space.\n\n6ï¸âƒ£ If it still crashes, delete and reinstall the app.";
        }

        if (lower.includes("app won't open") || lower.includes("app doesn't open") || lower.includes("can't open app")) {
          return "App won't open?\n\n1ï¸âƒ£ Restart your device.\n\n2ï¸âƒ£ Update the app in your app store.\n\n3ï¸âƒ£ Check if your device's operating system needs an update.\n\n4ï¸âƒ£ Delete the app and download it again.\n\n5ï¸âƒ£ Make sure you have enough storage space.\n\n6ï¸âƒ£ Check if the app works on your device (some apps need newer phones).";
        }

        // General App Crashes
        if (lower.includes("crash") || lower.includes("freeze") || lower.includes("not responding") || lower.includes("stopped working") || lower.includes("hang")) {
          return "App crashing or freezing?\n\n1ï¸âƒ£ Close the app completely and reopen it.\n\n2ï¸âƒ£ Restart your device.\n\n3ï¸âƒ£ Update the app.\n\n4ï¸âƒ£ Clear the app's cache (Settings > Apps > Clear cache).\n\n5ï¸âƒ£ Make sure you have free storage space.\n\n6ï¸âƒ£ Delete and reinstall the app (backup important data first).";
        }

        // VERY SPECIFIC PRINTER ISSUES
        if (lower.includes("printer offline") || lower.includes("printer says offline")) {
          return "Printer says offline?\n\n1ï¸âƒ£ Turn the printer off, wait 10 seconds, turn it back on.\n\n2ï¸âƒ£ Check the cable is plugged in (or Wi-Fi is connected).\n\n3ï¸âƒ£ On your computer:\n   â€¢ Windows: Settings > Devices > Printers > Right-click your printer > 'Use printer online'\n   â€¢ Mac: System Preferences > Printers > Delete printer and add it again\n\n4ï¸âƒ£ Restart your computer.\n\n5ï¸âƒ£ Make sure printer and computer are on the same Wi-Fi network.";
        }

        if (lower.includes("printer won't print") || lower.includes("nothing prints") || lower.includes("printer not printing")) {
          return "Printer won't print?\n\n1ï¸âƒ£ Check basics: Is it turned on? Does it have paper? Does it have ink?\n\n2ï¸âƒ£ Check the cable is plugged in (or Wi-Fi is connected).\n\n3ï¸âƒ£ Cancel all print jobs:\n   â€¢ Windows: Settings > Devices > Printers > Open queue > Cancel all\n   â€¢ Mac: System Preferences > Printers > Open print queue > Cancel all\n\n4ï¸âƒ£ Restart the printer and your computer.\n\n5ï¸âƒ£ Try printing a test page from the printer itself (no computer).";
        }

        if (lower.includes("paper jam") || lower.includes("jammed")) {
          return "Paper jammed in printer?\n\n1ï¸âƒ£ Turn off the printer.\n\n2ï¸âƒ£ Open all doors and trays.\n\n3ï¸âƒ£ Gently pull out any paper you see. Pull in the direction it normally feeds.\n\n4ï¸âƒ£ Check for small torn pieces - remove everything.\n\n5ï¸âƒ£ Close everything and turn the printer back on.\n\n6ï¸âƒ£ If it still says paper jam, there might be a small piece stuck inside - check again carefully.";
        }

        // General Printer
        if (lower.includes("print") || lower.includes("printer") || lower.includes("scan")) {
          return "Printer problem?\n\n1ï¸âƒ£ Check: Is it on? Does it have paper and ink?\n\n2ï¸âƒ£ Check the cable or Wi-Fi connection.\n\n3ï¸âƒ£ Restart the printer and your computer.\n\n4ï¸âƒ£ Cancel all print jobs and try again.\n\n5ï¸âƒ£ Make sure it's set as your default printer.\n\n6ï¸âƒ£ Try printing a test page from the printer itself.";
        }

        // VERY SPECIFIC FROZEN SCREEN ISSUES
        if (lower.includes("screen frozen") || lower.includes("completely frozen") || lower.includes("won't respond")) {
          return "Screen completely frozen?\n\n1ï¸âƒ£ Wait 30 seconds - sometimes it's just thinking.\n\n2ï¸âƒ£ Try these keyboard shortcuts:\n   â€¢ Windows: Press Ctrl+Alt+Delete\n   â€¢ Mac: Press Command+Option+Escape\n\n3ï¸âƒ£ If that doesn't work, force restart:\n   â€¢ Desktop: Hold the power button for 10 seconds\n   â€¢ Laptop: Hold the power button for 10 seconds\n   â€¢ Phone: Hold power + volume down for 10 seconds\n\n4ï¸âƒ£ After it restarts, don't open everything at once.\n\n5ï¸âƒ£ If this happens often, you might have a virus - run a scan.";
        }

        if (lower.includes("mouse not moving") || lower.includes("cursor frozen") || lower.includes("mouse stuck")) {
          return "Mouse cursor not moving?\n\n1ï¸âƒ£ Try pressing Ctrl+Alt+Delete (Windows) or Command+Option+Escape (Mac).\n\n2ï¸âƒ£ Unplug your mouse and plug it back in.\n\n3ï¸âƒ£ Try a different USB port.\n\n4ï¸âƒ£ For wireless mouse, change the batteries.\n\n5ï¸âƒ£ Try using keyboard to navigate (Tab key to move, Enter to click).\n\n6ï¸âƒ£ If nothing works, hold the power button for 10 seconds to restart.";
        }

        // General Frozen
        if (lower.includes("frozen") || lower.includes("stuck") || lower.includes("unresponsive")) {
          return "Device frozen?\n\n1ï¸âƒ£ Wait 30 seconds first.\n\n2ï¸âƒ£ Try Ctrl+Alt+Delete (Windows) or Command+Option+Escape (Mac).\n\n3ï¸âƒ£ If that doesn't work, force restart by holding the power button for 10 seconds.\n\n4ï¸âƒ£ After restart, don't open all your programs at once.\n\n5ï¸âƒ£ If it freezes often, run a virus scan and free up storage space.";
        }

        // VERY SPECIFIC PASSWORD ISSUES
        if (lower.includes("forgot windows password") || lower.includes("can't log into windows")) {
          return "Forgot Windows password?\n\n1ï¸âƒ£ On the login screen, click 'I forgot my password'.\n\n2ï¸âƒ£ Follow the steps to reset using your Microsoft account.\n\n3ï¸âƒ£ If you don't have a Microsoft account, you'll need to:\n   â€¢ Use another admin account on the computer, OR\n   â€¢ Use a password reset disk if you made one, OR\n   â€¢ Reinstall Windows (you'll lose your files)\n\n4ï¸âƒ£ For work computers, contact your IT department.";
        }

        if (lower.includes("forgot mac password") || lower.includes("can't log into mac")) {
          return "Forgot Mac password?\n\n1ï¸âƒ£ On the login screen, enter any password 3 times.\n\n2ï¸âƒ£ You'll see 'Reset using Apple ID' - click it.\n\n3ï¸âƒ£ Enter your Apple ID and password.\n\n4ï¸âƒ£ Create a new password.\n\n5ï¸âƒ£ If that doesn't work:\n   â€¢ Restart and hold Command+R\n   â€¢ Click Utilities > Terminal\n   â€¢ Type: resetpassword\n   â€¢ Follow the instructions";
        }

        // General Password
        if (lower.includes("password") || lower.includes("forgot") || lower.includes("login") || lower.includes("sign in") || lower.includes("locked out")) {
          return "Password problem?\n\n1ï¸âƒ£ Click 'Forgot Password' on the login page.\n\n2ï¸âƒ£ Check your email or phone for a reset link or code.\n\n3ï¸âƒ£ Try passwords you commonly use.\n\n4ï¸âƒ£ Check if Caps Lock is on.\n\n5ï¸âƒ£ For work accounts, contact your IT department.\n\n6ï¸âƒ£ After you reset it, write it down somewhere safe.";
        }

        // VERY SPECIFIC BATTERY ISSUES
        if (lower.includes("battery drains fast") || lower.includes("battery dies quickly") || lower.includes("battery doesn't last")) {
          return "Battery draining too fast?\n\n1ï¸âƒ£ Lower your screen brightness (this uses the most battery).\n\n2ï¸âƒ£ Turn on Battery Saver mode:\n   â€¢ iPhone: Settings > Battery > Low Power Mode\n   â€¢ Android: Settings > Battery > Battery Saver\n\n3ï¸âƒ£ Turn off Wi-Fi and Bluetooth when you're not using them.\n\n4ï¸âƒ£ Close apps you're not using.\n\n5ï¸âƒ£ Check which apps use the most battery (Settings > Battery) and close them.\n\n6ï¸âƒ£ If your phone is old (2+ years), the battery might be worn out and need replacing.";
        }

        if (lower.includes("won't charge") || lower.includes("not charging") || lower.includes("charging slow")) {
          return "Device won't charge?\n\n1ï¸âƒ£ Try a different charging cable.\n\n2ï¸âƒ£ Try a different power outlet.\n\n3ï¸âƒ£ Clean the charging port gently with a toothpick (turn device off first).\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Try charging from a wall outlet instead of computer USB.\n\n6ï¸âƒ£ If it charges very slowly, your cable or charger might be damaged.";
        }

        // General Battery
        if (lower.includes("battery") || lower.includes("drain") || lower.includes("charge") || lower.includes("power")) {
          return "Battery problem?\n\n1ï¸âƒ£ Lower screen brightness.\n\n2ï¸âƒ£ Turn on Battery Saver or Low Power Mode.\n\n3ï¸âƒ£ Turn off Wi-Fi and Bluetooth when not using them.\n\n4ï¸âƒ£ Close apps you're not using.\n\n5ï¸âƒ£ Check Settings > Battery to see what's using power.\n\n6ï¸âƒ£ If battery is old (2+ years), it might need replacing.";
        }

        // BLUE SCREEN
        if (lower.includes("blue screen") || lower.includes("bsod") || lower.includes("stop error")) {
          return "Blue screen error?\n\n1ï¸âƒ£ Write down the error code if you see one.\n\n2ï¸âƒ£ Restart your computer - it might be a one-time thing.\n\n3ï¸âƒ£ Update Windows (Settings > Update & Security).\n\n4ï¸âƒ£ Update your drivers (especially graphics card).\n\n5ï¸âƒ£ Run a virus scan.\n\n6ï¸âƒ£ If it keeps happening, your computer might have a hardware problem - back up your files and take it to a repair shop.";
        }

        // VERY SPECIFIC SOUND ISSUES
        if (lower.includes("no sound") || lower.includes("can't hear") || lower.includes("audio not working")) {
          return "No sound coming out?\n\n1ï¸âƒ£ Check the volume - make sure it's not muted or at zero.\n\n2ï¸âƒ£ Check you're using the right output:\n   â€¢ Windows: Click speaker icon > Click arrow > Select your speakers/headphones\n   â€¢ Mac: System Preferences > Sound > Output > Select your device\n\n3ï¸âƒ£ Unplug headphones and plug them back in.\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Try different headphones or speakers to see if yours are broken.\n\n6ï¸âƒ£ Update your audio drivers (Windows: Device Manager > Sound controllers).";
        }

        if (lower.includes("sound crackling") || lower.includes("audio crackling") || lower.includes("static")) {
          return "Sound crackling or static?\n\n1ï¸âƒ£ Unplug your headphones/speakers and plug them back in.\n\n2ï¸âƒ£ Try a different audio jack or USB port.\n\n3ï¸âƒ£ Lower the volume - sometimes too loud causes crackling.\n\n4ï¸âƒ£ Update your audio drivers (Device Manager > Sound controllers).\n\n5ï¸âƒ£ Try different headphones to see if yours are damaged.\n\n6ï¸âƒ£ Close other programs - too many can cause audio issues.";
        }

        // General Sound
        if (lower.includes("sound") || lower.includes("audio") || lower.includes("speaker") || lower.includes("volume") || lower.includes("hear")) {
          return "Sound problem?\n\n1ï¸âƒ£ Check volume is up and not muted.\n\n2ï¸âƒ£ Make sure the right speakers/headphones are selected.\n\n3ï¸âƒ£ Unplug and replug your headphones.\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Try different headphones to test.\n\n6ï¸âƒ£ Update your audio drivers.";
        }

        // VERY SPECIFIC CAMERA ISSUES
        if (lower.includes("camera black screen") || lower.includes("webcam black") || lower.includes("camera shows black")) {
          return "Camera showing black screen?\n\n1ï¸âƒ£ Check if there's a cover or sticker over the camera.\n\n2ï¸âƒ£ Close all apps that might use the camera (Zoom, Teams, Skype).\n\n3ï¸âƒ£ Restart your device.\n\n4ï¸âƒ£ Give the app permission to use camera:\n   â€¢ Windows: Settings > Privacy > Camera > Allow apps\n   â€¢ Mac: System Preferences > Security & Privacy > Camera > Check the app\n\n5ï¸âƒ£ Update the app you're trying to use.\n\n6ï¸âƒ£ Try the camera in a different app to see if it works.";
        }

        if (lower.includes("camera not working in zoom") || lower.includes("camera not working in teams")) {
          return "Camera not working in Zoom/Teams?\n\n1ï¸âƒ£ In the app, click Settings > Video > Select your camera from the dropdown.\n\n2ï¸âƒ£ Close the app completely and reopen it.\n\n3ï¸âƒ£ Give the app camera permission:\n   â€¢ Windows: Settings > Privacy > Camera\n   â€¢ Mac: System Preferences > Security & Privacy > Camera\n\n4ï¸âƒ£ Close other apps that might be using the camera.\n\n5ï¸âƒ£ Restart your computer.\n\n6ï¸âƒ£ Update the app to the latest version.";
        }

        // General Camera
        if (lower.includes("camera") || lower.includes("webcam") || lower.includes("video")) {
          return "Camera not working?\n\n1ï¸âƒ£ Check if there's a cover over the camera.\n\n2ï¸âƒ£ Close other apps using the camera.\n\n3ï¸âƒ£ Give the app permission (Settings > Privacy > Camera).\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Update the app.\n\n6ï¸âƒ£ Try the camera in a different app to test it.";
        }

        // VERY SPECIFIC BLUETOOTH ISSUES
        if (lower.includes("bluetooth won't pair") || lower.includes("can't pair bluetooth") || lower.includes("bluetooth pairing failed")) {
          return "Bluetooth won't pair?\n\n1ï¸âƒ£ Put your device in pairing mode (usually hold the power button until it flashes).\n\n2ï¸âƒ£ On your phone/computer, turn Bluetooth off and back on.\n\n3ï¸âƒ£ Forget the device and try pairing again:\n   â€¢ Find it in Bluetooth settings\n   â€¢ Click 'Forget' or 'Remove'\n   â€¢ Search for it again\n\n4ï¸âƒ£ Move the devices closer together (within 3 feet).\n\n5ï¸âƒ£ Charge your Bluetooth device - low battery causes problems.\n\n6ï¸âƒ£ Restart both devices.";
        }

        if (lower.includes("bluetooth keeps disconnecting") || lower.includes("bluetooth drops")) {
          return "Bluetooth keeps disconnecting?\n\n1ï¸âƒ£ Move closer - walls and distance cause disconnections.\n\n2ï¸âƒ£ Charge your Bluetooth device.\n\n3ï¸âƒ£ Turn off other Bluetooth devices nearby - they can interfere.\n\n4ï¸âƒ£ Forget the device and pair it again.\n\n5ï¸âƒ£ Update your phone/computer's software.\n\n6ï¸âƒ£ Turn off Wi-Fi temporarily to see if it helps (Wi-Fi can interfere with Bluetooth).";
        }

        // General Bluetooth
        if (lower.includes("bluetooth") || lower.includes("pairing") || lower.includes("wireless headphones") || lower.includes("airpods")) {
          return "Bluetooth problem?\n\n1ï¸âƒ£ Turn Bluetooth off and back on.\n\n2ï¸âƒ£ Put your device in pairing mode (hold power button until it flashes).\n\n3ï¸âƒ£ Move devices closer together.\n\n4ï¸âƒ£ Forget the device and pair again.\n\n5ï¸âƒ£ Charge your Bluetooth device.\n\n6ï¸âƒ£ Restart both devices.";
        }

        // VERY SPECIFIC KEYBOARD/MOUSE ISSUES
        if (lower.includes("keyboard keys not working") || lower.includes("some keys don't work")) {
          return "Some keyboard keys not working?\n\n1ï¸âƒ£ Restart your computer.\n\n2ï¸âƒ£ Clean under the keys - dust and crumbs cause problems. Use compressed air.\n\n3ï¸âƒ£ Check if Num Lock or Function Lock is on (might change what keys do).\n\n4ï¸âƒ£ Try the keyboard on another computer to see if it's broken.\n\n5ï¸âƒ£ For laptops, try an external USB keyboard to see if the built-in one is damaged.\n\n6ï¸âƒ£ Update keyboard drivers (Device Manager > Keyboards).";
        }

        if (lower.includes("mouse not working") || lower.includes("mouse won't move")) {
          return "Mouse not working?\n\n1ï¸âƒ£ Check the cable is plugged in (or batteries for wireless).\n\n2ï¸âƒ£ Try a different USB port.\n\n3ï¸âƒ£ For wireless mouse, make sure the USB receiver is plugged in.\n\n4ï¸âƒ£ Clean the bottom of the mouse - dust blocks the sensor.\n\n5ï¸âƒ£ Try the mouse on a different surface (not glass or shiny).\n\n6ï¸âƒ£ Restart your computer.\n\n7ï¸âƒ£ Try a different mouse to see if yours is broken.";
        }

        if (lower.includes("typing wrong letters") || lower.includes("keyboard typing wrong")) {
          return "Keyboard typing wrong letters?\n\n1ï¸âƒ£ Check if you accidentally changed the keyboard language:\n   â€¢ Windows: Look at bottom right corner, click language, select English\n   â€¢ Mac: Top right corner, click flag icon, select English\n\n2ï¸âƒ£ Turn off Num Lock (might make some keys type numbers).\n\n3ï¸âƒ£ Restart your computer.\n\n4ï¸âƒ£ Check keyboard settings to make sure it's set to your language.";
        }

        // General Keyboard/Mouse
        if (lower.includes("keyboard") || lower.includes("mouse") || lower.includes("trackpad") || lower.includes("typing") || lower.includes("cursor")) {
          return "Keyboard or mouse problem?\n\n1ï¸âƒ£ Check cables are plugged in (or batteries for wireless).\n\n2ï¸âƒ£ Try a different USB port.\n\n3ï¸âƒ£ Restart your computer.\n\n4ï¸âƒ£ Clean the device - dust causes problems.\n\n5ï¸âƒ£ Update drivers (Device Manager > Keyboards/Mice).\n\n6ï¸âƒ£ Try a different keyboard/mouse to test.";
        }

        // VERY SPECIFIC STORAGE ISSUES
        if (lower.includes("storage full") || lower.includes("disk full") || lower.includes("no space left")) {
          return "Storage full? Here's how to free up space:\n\n1ï¸âƒ£ Empty your Recycle Bin/Trash.\n\n2ï¸âƒ£ Delete old downloads (Downloads folder).\n\n3ï¸âƒ£ Delete programs you don't use:\n   â€¢ Windows: Settings > Apps > Uninstall\n   â€¢ Mac: Open Applications folder, drag apps to Trash\n\n4ï¸âƒ£ Clear browser cache (Ctrl+Shift+Delete).\n\n5ï¸âƒ£ Move photos and videos to Google Photos or iCloud.\n\n6ï¸âƒ£ Use Disk Cleanup:\n   â€¢ Windows: Search 'Disk Cleanup', run it\n   â€¢ Mac: About This Mac > Storage > Manage";
        }

        if (lower.includes("what's taking up space") || lower.includes("find large files")) {
          return "Want to see what's using your storage?\n\n1ï¸âƒ£ Windows: Settings > System > Storage > Click your drive > See what's using space\n\n2ï¸âƒ£ Mac: Apple menu > About This Mac > Storage > Manage\n\n3ï¸âƒ£ Look for:\n   â€¢ Old downloads\n   â€¢ Videos (these are huge)\n   â€¢ Programs you don't use\n   â€¢ Duplicate files\n\n4ï¸âƒ£ Delete what you don't need.\n\n5ï¸âƒ£ Move important files to an external drive or cloud storage.";
        }

        // General Storage
        if (lower.includes("storage") || lower.includes("disk") || lower.includes("space") || lower.includes("full") || lower.includes("memory")) {
          return "Need more storage space?\n\n1ï¸âƒ£ Empty Recycle Bin/Trash.\n\n2ï¸âƒ£ Delete old downloads and files.\n\n3ï¸âƒ£ Uninstall programs you don't use.\n\n4ï¸âƒ£ Clear browser cache.\n\n5ï¸âƒ£ Move photos/videos to cloud storage.\n\n6ï¸âƒ£ Run Disk Cleanup (Windows) or Manage Storage (Mac).";
        }

        // VERY SPECIFIC INSTALLATION ISSUES
        if (lower.includes("can't install") || lower.includes("won't install") || lower.includes("installation failed")) {
          return "Can't install software?\n\n1ï¸âƒ£ Right-click the installer and choose 'Run as administrator'.\n\n2ï¸âƒ£ Turn off your antivirus temporarily (it might be blocking it).\n\n3ï¸âƒ£ Make sure you have enough free space (at least 10GB).\n\n4ï¸âƒ£ Download the installer again - it might be corrupted.\n\n5ï¸âƒ£ Restart your computer and try again.\n\n6ï¸âƒ£ Check if your computer meets the requirements (look on the software's website).";
        }

        if (lower.includes("windows update won't install") || lower.includes("update failed")) {
          return "Windows Update not working?\n\n1ï¸âƒ£ Restart your computer and try again.\n\n2ï¸âƒ£ Free up storage space (need at least 10GB).\n\n3ï¸âƒ£ Run Windows Update Troubleshooter:\n   â€¢ Settings > Update & Security > Troubleshoot > Windows Update\n\n4ï¸âƒ£ Disconnect external drives and try again.\n\n5ï¸âƒ£ If it keeps failing, search the error code on Google for specific help.";
        }

        // General Installation
        if (lower.includes("install") || lower.includes("update") || lower.includes("download") || lower.includes("setup")) {
          return "Installation problem?\n\n1ï¸âƒ£ Run as administrator (right-click > Run as administrator).\n\n2ï¸âƒ£ Turn off antivirus temporarily.\n\n3ï¸âƒ£ Make sure you have enough storage space.\n\n4ï¸âƒ£ Download the file again.\n\n5ï¸âƒ£ Restart and try again.\n\n6ï¸âƒ£ Check if your computer meets the requirements.";
        }

        // SCREEN ISSUES
        if (lower.includes("screen") || lower.includes("display") || lower.includes("monitor") || lower.includes("resolution")) {
          return "Screen problem?\n\n1ï¸âƒ£ Check all cables are plugged in tight.\n\n2ï¸âƒ£ Try a different cable or port.\n\n3ï¸âƒ£ Adjust brightness.\n\n4ï¸âƒ£ Update graphics drivers.\n\n5ï¸âƒ£ Change screen resolution (Settings > Display).\n\n6ï¸âƒ£ Restart your computer.\n\n7ï¸âƒ£ Try the monitor with a different computer to test it.";
        }

        // OVERHEATING
        if (lower.includes("hot") || lower.includes("heat") || lower.includes("overheat") || lower.includes("temperature")) {
          return "Device getting too hot?\n\n1ï¸âƒ£ Make sure air vents aren't blocked.\n\n2ï¸âƒ£ Don't use laptop on bed, couch, or soft surfaces.\n\n3ï¸âƒ£ Clean dust from vents with compressed air.\n\n4ï¸âƒ£ Close programs you're not using.\n\n5ï¸âƒ£ Use in a cooler room.\n\n6ï¸âƒ£ Put laptop on a hard, flat surface.\n\n7ï¸âƒ£ If it's always hot, the cooling system might need repair.";
        }

        // VPN
        if (lower.includes("vpn")) {
          return "VPN not working?\n\n1ï¸âƒ£ Disconnect and reconnect.\n\n2ï¸âƒ£ Try a different server location.\n\n3ï¸âƒ£ Restart the VPN app.\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Check your internet works without VPN first.\n\n6ï¸âƒ£ Update the VPN app.\n\n7ï¸âƒ£ Try turning off your firewall temporarily.";
        }

        // USB
        if (lower.includes("usb") || lower.includes("flash drive") || lower.includes("external drive")) {
          return "USB device not working?\n\n1ï¸âƒ£ Try a different USB port.\n\n2ï¸âƒ£ Try the device on another computer.\n\n3ï¸âƒ£ Restart your computer with the device unplugged, then plug it in.\n\n4ï¸âƒ£ Check if the device shows up in File Explorer (Windows) or Finder (Mac).\n\n5ï¸âƒ£ Update USB drivers (Device Manager).\n\n6ï¸âƒ£ Check for physical damage to the port or device.";
        }

        // Default / General Response
        return "I can help! To give you the best solution, tell me:\n\n1ï¸âƒ£ What exactly is happening? (Error message? Nothing happens? Something else?)\n\n2ï¸âƒ£ What device are you using? (Windows PC, Mac, iPhone, Android, etc.)\n\n3ï¸âƒ£ When did this start?\n\n4ï¸âƒ£ What have you tried already?\n\nOr click one of the buttons above for common problems!";
      }

      function handleUserSubmit(text) {
        if (!text || !text.trim()) {
          showError("Please describe your tech issue so I can help.");
          return;
        }
        const cleaned = text.trim();
        addMessage("user", cleaned);
        setSending(true);

        setTimeout(() => {
          const reply = generateAssistantReply(cleaned);
          addMessage("assistant", reply);
          setSending(false);
        }, 800);
      }

      if (inputForm) {
        inputForm.addEventListener("submit", function (event) {
          event.preventDefault();
          handleUserSubmit(inputField.value);
          inputField.value = "";
          inputField.style.height = "auto";
        });
      }

      if (inputField) {
        inputField.addEventListener("input", function () {
          this.style.height = "auto";
          this.style.height = this.scrollHeight + "px";
        });
      }

      // Category buttons
      document.addEventListener("click", function (e) {
        const btn = e.target.closest(".category-btn");
        if (!btn) return;
        const prompt = btn.getAttribute("data-prompt");
        if (!prompt) return;
        if (inputField) {
          inputField.value = prompt;
          inputField.style.height = "auto";
          inputField.style.height = inputField.scrollHeight + "px";
          inputField.focus();
        }
      });

      // Back button
      if (backBtn) {
        backBtn.addEventListener("click", function() {
          // Clear all messages except the initial assistant message
          const messages = chatContainer.querySelectorAll('[data-role]');
          messages.forEach((msg, index) => {
            if (index > 0) { // Keep first message
              msg.remove();
            }
          });
          
          // Show welcome block
          if (welcomeBlock) {
            welcomeBlock.classList.remove("hidden");
          }
          
          // Hide back button
          backBtn.classList.add("hidden");
          backBtn.classList.remove("flex");
          
          // Clear input
          if (inputField) {
            inputField.value = "";
            inputField.style.height = "auto";
          }
          
          // Scroll to top
          chatContainer.scrollTop = 0;
        });
      }

      // --- Element SDK: config-driven text, colors, font, size ---

      const defaultConfig = {
        main_title: "Tech Support Assistant",
        welcome_title: "Hi, I'm your tech assistant ğŸ”§",
        welcome_body:
          "Describe what's going wrong with your computer, phone, or apps, and I'll walk you through simple, stepâ€‘byâ€‘step fixes.",
        placeholder_text: "Ask a question about your device, app, or setup...",
        primary_button_text: "Send",
        footer_text:
          "Responses are suggestions only. For sensitive systems, confirm steps with your IT team first.",
        // Colors
        background_color: "#1a1a2e",
        surface_color: "#0f3460",
        text_color: "#ffffff",
        primary_action_color: "#e94560",
        secondary_action_color: "#533483",
        // Font
        font_family: "system-ui",
        font_size: 14
      };

      async function onConfigChange(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});

        const root = document.body;
        if (root) {
          root.style.backgroundColor = cfg.background_color;
        }

        const container = document.querySelector("div.h-full.flex.flex-col");
        if (container) {
          container.style.backgroundColor = cfg.background_color;
        }

        const headers = document.querySelectorAll("header");
        headers.forEach((el) => {
          el.style.backgroundColor = cfg.surface_color;
          el.style.borderBottomColor = cfg.primary_action_color;
        });

        const footerSection = document.querySelector(
          "section[aria-label='Ask a tech support question']"
        );
        if (footerSection) {
          footerSection.style.backgroundColor = cfg.surface_color;
          footerSection.style.borderTopColor = cfg.secondary_action_color;
        }

        const textEls = document.querySelectorAll("body, p, span, label, h1, h2, button");
        textEls.forEach((el) => {
          el.style.color = cfg.text_color;
        });

        // Primary button
        if (sendBtn) {
          sendBtn.style.backgroundColor = cfg.primary_action_color;
        }

        // Back button
        if (backBtn) {
          backBtn.style.backgroundColor = cfg.secondary_action_color;
        }

        // Category buttons and some avatars
        const categoryButtons = document.querySelectorAll(".category-btn");
        categoryButtons.forEach((btn) => {
          btn.style.backgroundColor = cfg.secondary_action_color;
        });
        const assistantAvatars = document.querySelectorAll(
          ".message-avatar.bg-\\[\\#533483\\]"
        );
        assistantAvatars.forEach((el) => {
          el.style.backgroundColor = cfg.secondary_action_color;
        });

        // Scrollbar colors
        const style = document.createElement('style');
        style.textContent = `
          .cc-scroll::-webkit-scrollbar-track {
            background: ${cfg.surface_color} !important;
          }
          .cc-scroll::-webkit-scrollbar-thumb {
            background-color: ${cfg.secondary_action_color} !important;
            border-color: ${cfg.surface_color} !important;
          }
          .cc-scroll {
            scrollbar-color: ${cfg.secondary_action_color} ${cfg.surface_color} !important;
          }
        `;
        document.head.appendChild(style);

        // Text content
        if (mainTitleEl) {
          mainTitleEl.textContent = cfg.main_title || defaultConfig.main_title;
        }
        if (welcomeTitleEl) {
          welcomeTitleEl.textContent =
            cfg.welcome_title || defaultConfig.welcome_title;
        }
        if (welcomeBodyEl) {
          welcomeBodyEl.textContent =
            cfg.welcome_body || defaultConfig.welcome_body;
        }
        if (inputField) {
          inputField.placeholder =
            cfg.placeholder_text || defaultConfig.placeholder_text;
        }
        if (sendText) {
          sendText.textContent =
            cfg.primary_button_text || defaultConfig.primary_button_text;
        }
        if (footerTextEl) {
          footerTextEl.textContent =
            cfg.footer_text || defaultConfig.footer_text;
        }

        // Font + size
        const baseFont =
          (cfg.font_family && cfg.font_family.trim()) || defaultConfig.font_family;
        const baseSize = Number.isFinite(cfg.font_size)
          ? cfg.font_size
          : defaultConfig.font_size;
        const fontStack = baseFont + ", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif";

        document.documentElement.style.fontFamily = fontStack;

        if (mainTitleEl) {
          mainTitleEl.style.fontSize = baseSize * 1.7 + "px";
        }
        if (welcomeTitleEl) {
          welcomeTitleEl.style.fontSize = baseSize * 1.5 + "px";
        }
        if (welcomeBodyEl) {
          welcomeBodyEl.style.fontSize = baseSize * 1.0 + "px";
        }
        if (inputField) {
          inputField.style.fontSize = baseSize * 0.95 + "px";
        }
        const labels = document.querySelectorAll("label");
        labels.forEach((el) => {
          el.style.fontSize = baseSize * 0.85 + "px";
        });
        const smallTexts = document.querySelectorAll(
          "#cc-footer-text, .message-time"
        );
        smallTexts.forEach((el) => {
          el.style.fontSize = baseSize * 0.8 + "px";
        });
      }

      function mapToCapabilities(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});

        const recolorables = [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => {
              cfg.background_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_color: value });
              }
            }
          },
          {
            get: () => cfg.surface_color || defaultConfig.surface_color,
            set: (value) => {
              cfg.surface_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ surface_color: value });
              }
            }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => {
              cfg.text_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          },
          {
            get: () =>
              cfg.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              cfg.primary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            }
          },
          {
            get: () =>
              cfg.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              cfg.secondary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          }
        ];

        const fontEditable = {
          get: () => cfg.font_family || defaultConfig.font_family,
          set: (value) => {
            cfg.font_family = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_family: value });
            }
          }
        };

        const fontSizeable = {
          get: () => cfg.font_size || defaultConfig.font_size,
          set: (value) => {
            cfg.font_size = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        };

        return {
          recolorables,
          borderables: [],
          fontEditable,
          fontSizeable
        };
      }

      function mapToEditPanelValues(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});
        return new Map([
          ["main_title", cfg.main_title],
          ["welcome_title", cfg.welcome_title],
          ["welcome_body", cfg.welcome_body],
          ["placeholder_text", cfg.placeholder_text],
          ["primary_button_text", cfg.primary_button_text],
          ["footer_text", cfg.footer_text]
        ]);
      }

      if (window.elementSdk && typeof window.elementSdk.init === "function") {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      } else {
        // Fallback: apply defaults immediately if SDK not available
        onConfigChange(defaultConfig);
      }
    </script>
  <meta charset="UTF-8">
  <title>Tech Support Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- SDKs -->
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script><!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
      body {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
      }
      * {
        box-sizing: border-box;
      }
      /* Custom scrollbar for chat */
      .cc-scroll::-webkit-scrollbar {
        width: 12px;
      }
      .cc-scroll::-webkit-scrollbar-track {
        background: #0f3460;
        border-radius: 10px;
      }
      .cc-scroll::-webkit-scrollbar-thumb {
        background-color: #533483;
        border-radius: 10px;
        border: 2px solid #0f3460;
      }
      .cc-scroll::-webkit-scrollbar-thumb:hover {
        background-color: #6d44a8;
      }
      /* Firefox scrollbar */
      .cc-scroll {
        scrollbar-width: auto;
        scrollbar-color: #533483 #0f3460;
      }

      @keyframes cc-slide-in {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .cc-message-anim {
        animation: cc-slide-in 0.25s ease-out;
      }

      /* Focus ring for accessibility */
      .cc-focus-visible:focus-visible {
        outline: 2px solid #e94560;
        outline-offset: 2px;
      }
    </style>
  <div class="h-full flex flex-col bg-[#1a1a2e]">
   <header class="flex-shrink-0 border-b-2 border-[#e94560] bg-[#0f3460] text-[#e94560]" role="banner">
    <div class="max-w-5xl mx-auto px-6 py-4 flex items-center justify-between gap-4">
     <div class="flex items-center gap-3"><button id="cc-back-btn" type="button" class="cc-focus-visible hidden items-center justify-center h-9 w-9 rounded-full bg-[#533483] hover:bg-[#6d44a8] text-white transition" aria-label="Go back to welcome screen"> â† </button>
      <h1 id="cc-main-title" class="text-xl font-semibold">Tech Support Assistant</h1>
     </div>
     <div class="inline-flex items-center gap-2 text-xs text-white/80 bg-[#16213e] px-3 py-1.5 rounded-full"><span class="inline-flex h-2 w-2 rounded-full bg-[#22c55e]" aria-hidden="true"></span> <span>Online helper</span>
     </div>
    </div>
   </header>
   <main class="flex-1 min-h-0 flex flex-col" role="main">
    <section aria-label="Chat conversation" class="flex-1 min-h-0 overflow-hidden">
     <div id="cc-chat-container" class="cc-scroll max-w-5xl mx-auto px-6 py-6 flex flex-col gap-4 overflow-y-auto"><!-- Welcome block (hidden after first real message) -->
      <article id="cc-welcome" class="text-center text-white max-w-xl mx-auto mt-6 bg-[#16213e]/70 rounded-2xl px-6 py-8 shadow-lg">
       <h2 id="cc-welcome-title" class="text-2xl font-semibold text-[#e94560] mb-2">Hi, I'm your tech assistant ğŸ”§</h2>
       <p id="cc-welcome-body" class="text-sm text-white/80 mb-4 leading-relaxed">Describe what's going wrong with your computer, phone, or apps, and I'll walk you through simple, stepâ€‘byâ€‘step fixes.</p>
       <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 text-left text-xs" aria-label="Quick help categories"><button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My Wiâ€‘Fi or internet connection isn't working"> ğŸ›œ Wiâ€‘Fi &amp; Internet </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My computer is running very slowly"> ğŸ–¥ï¸ Slow Computer </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I have issues with my email not sending or receiving"> ğŸ“§ Email Issues </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My software or app keeps crashing or freezing"> âš™ï¸ Apps Crashing </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I can't print from my computer"> ğŸ–¨ï¸ Printer Problems </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My screen is frozen or not responding"> ğŸ”’ Frozen Screen </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I forgot my password"> ğŸ”‘ Password Reset </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My battery drains too quickly"> ğŸ”‹ Battery Drain </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I'm getting a blue screen error"> ğŸ’™ Blue Screen </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My audio or sound isn't working"> ğŸ”Š No Sound </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My webcam or camera isn't working"> ğŸ“· Camera Issues </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I can't connect my Bluetooth device"> ğŸ“¡ Bluetooth </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My keyboard or mouse isn't working"> âŒ¨ï¸ Keyboard/Mouse </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My storage is full"> ğŸ’¾ Storage Full </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I can't install or update software"> ğŸ“¦ Install Issues </button>
       </div>
      </article><!-- Initial assistant message -->
      <div class="flex items-start gap-3 max-w-xl cc-message-anim" data-role="assistant-message">
       <div class="message-avatar flex items-center justify-center h-9 w-9 rounded-full bg-[#533483] text-white text-lg flex-shrink-0" aria-hidden="true">
        ğŸ¤–
       </div>
       <div class="flex-1">
        <div class="message-content bg-[#0f3460] text-white rounded-2xl rounded-bl-sm px-4 py-3 text-sm leading-relaxed">
         <p>I'm here to help you troubleshoot devices and apps. Tell me the issue in your own words, and I'll suggest clear steps you can follow.</p>
        </div>
        <p class="message-time text-[11px] text-white/60 mt-1">Assistant Â· just now</p>
       </div>
      </div>
     </div>
    </section>
    <section aria-label="Ask a tech support question" class="flex-shrink-0 border-t-2 border-[#533483] bg-[#0f3460]">
     <div class="max-w-5xl mx-auto px-6 py-4 space-y-2">
      <form id="cc-input-form" class="w-full" novalidate>
       <div class="flex items-end gap-3">
        <div class="flex-1"><label for="cc-input" class="block text-xs font-medium text-white/70 mb-1">Type your tech question</label>
         <div class="flex items-center gap-2 bg-[#1a1a2e] border-2 border-[#533483] rounded-full px-4 py-2.5 focus-within:border-[#e94560] transition"><textarea id="cc-input" rows="1" class="input-field block w-full bg-transparent border-none outline-none text-sm text-white placeholder:text-white/40 resize-none" placeholder="Ask a question about your device, app, or setup..."></textarea>
         </div>
        </div><button id="cc-send-btn" type="submit" class="cc-focus-visible inline-flex items-center justify-center bg-[#e94560] hover:bg-[#f25b72] text-white font-semibold text-sm px-5 py-2.5 rounded-full whitespace-nowrap transition disabled:opacity-60 disabled:cursor-not-allowed"> <span id="cc-send-text">Send</span> <span id="cc-send-spinner" class="hidden ml-2 h-4 w-4 border-2 border-white/40 border-t-white rounded-full animate-spin" aria-hidden="true"></span> </button>
       </div>
      </form>
      <p id="cc-footer-text" class="text-[11px] text-white/50 text-left">Responses are suggestions only. For sensitive systems, confirm steps with your IT team first.</p>
      <p id="cc-error" class="hidden text-xs text-[#fed7d7] bg-[#7f1d1d]/60 border border-[#fecaca] rounded-md px-3 py-1.5"></p>
     </div>
    </section>
   </main>
  </div>
  <script>
      // --- Comprehensive tech support knowledge base ---

      const chatContainer = document.getElementById("cc-chat-container");
      const inputForm = document.getElementById("cc-input-form");
      const inputField = document.getElementById("cc-input");
      const sendBtn = document.getElementById("cc-send-btn");
      const sendText = document.getElementById("cc-send-text");
      const sendSpinner = document.getElementById("cc-send-spinner");
      const errorBox = document.getElementById("cc-error");
      const welcomeBlock = document.getElementById("cc-welcome");
      const backBtn = document.getElementById("cc-back-btn");

      const welcomeTitleEl = document.getElementById("cc-welcome-title");
      const welcomeBodyEl = document.getElementById("cc-welcome-body");
      const mainTitleEl = document.getElementById("cc-main-title");
      const footerTextEl = document.getElementById("cc-footer-text");

      function showError(message) {
        if (!errorBox) return;
        errorBox.textContent = message;
        errorBox.classList.remove("hidden");
        setTimeout(() => {
          errorBox.classList.add("hidden");
        }, 3000);
      }

      function setSending(isSending) {
        if (!sendBtn) return;
        sendBtn.disabled = isSending;
        if (isSending) {
          sendSpinner.classList.remove("hidden");
        } else {
          sendSpinner.classList.add("hidden");
        }
      }

      function addMessage(role, text) {
        if (!chatContainer) return;

        if (welcomeBlock && !welcomeBlock.classList.contains("hidden")) {
          welcomeBlock.classList.add("hidden");
          if (backBtn) {
            backBtn.classList.remove("hidden");
            backBtn.classList.add("flex");
          }
        }

        const wrapper = document.createElement("div");
        wrapper.className =
          "flex items-start gap-3 max-w-xl cc-message-anim " +
          (role === "user" ? "ml-auto flex-row-reverse" : "");
        wrapper.setAttribute("data-role", role + "-message");

        const avatar = document.createElement("div");
        avatar.className =
          "message-avatar flex items-center justify-center h-9 w-9 rounded-full text-white text-lg flex-shrink-0 " +
          (role === "user" ? "bg-[#e94560]" : "bg-[#533483]");
        avatar.textContent = role === "user" ? "ğŸ‘¤" : "ğŸ¤–";

        const body = document.createElement("div");
        body.className = "flex-1";

        const bubble = document.createElement("div");
        bubble.className =
          "message-content text-white rounded-2xl px-4 py-3 text-sm leading-relaxed " +
          (role === "user"
            ? "bg-[#e94560] rounded-br-sm"
            : "bg-[#0f3460] rounded-bl-sm");
        
        // Format text with line breaks
        const lines = text.split('\n');
        lines.forEach((line, index) => {
          if (line.trim()) {
            const p = document.createElement('p');
            p.textContent = line;
            if (index > 0) p.className = 'mt-2';
            bubble.appendChild(p);
          }
        });

        const time = document.createElement("p");
        time.className = "message-time text-[11px] text-white/60 mt-1";
        const timestamp = new Date();
        const minutes = timestamp.getMinutes().toString().padStart(2, "0");
        const hours = timestamp.getHours().toString().padStart(2, "0");
        time.textContent =
          (role === "user" ? "You" : "Assistant") + " Â· " + hours + ":" + minutes;

        body.appendChild(bubble);
        body.appendChild(time);
        wrapper.appendChild(avatar);
        wrapper.appendChild(body);

        chatContainer.appendChild(wrapper);
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }

      function generateAssistantReply(message) {
        const lower = message.toLowerCase();

        // Very specific Wi-Fi issues
        if (lower.includes("wifi keeps disconnecting") || lower.includes("wi-fi drops") || lower.includes("connection drops")) {
          return "Your Wi-Fi keeps dropping? Here's what to do:\n\n1ï¸âƒ£ Move closer to your router. Walls and distance weaken the signal.\n\n2ï¸âƒ£ Unplug your router for 30 seconds, then plug it back in. Wait 3 minutes.\n\n3ï¸âƒ£ Change your Wi-Fi channel in router settings (use channel 1, 6, or 11 for less interference).\n\n4ï¸âƒ£ Turn off other devices using Wi-Fi to see if too many connections is the problem.\n\n5ï¸âƒ£ Update your router's firmware through its settings page.\n\n6ï¸âƒ£ On your device, forget the network and reconnect fresh.";
        }

        if (lower.includes("wifi connected but no internet") || lower.includes("connected but can't browse")) {
          return "Connected to Wi-Fi but can't access websites? Try this:\n\n1ï¸âƒ£ Restart your router - unplug it for 30 seconds.\n\n2ï¸âƒ£ On your device, turn Wi-Fi off then back on.\n\n3ï¸âƒ£ Open your device's network settings and change DNS to 8.8.8.8 (Google's DNS).\n\n4ï¸âƒ£ Check if other devices can access the internet. If not, call your internet provider.\n\n5ï¸âƒ£ Try opening a different website - the site you're trying might be down.";
        }

        if (lower.includes("wrong password") || lower.includes("can't connect") && lower.includes("password")) {
          return "Wi-Fi password not working?\n\n1ï¸âƒ£ Check if Caps Lock is on - passwords are case-sensitive.\n\n2ï¸âƒ£ Look at the router label for the exact password (usually on bottom or back).\n\n3ï¸âƒ£ Try typing the password in a notes app first to see it clearly, then copy-paste it.\n\n4ï¸âƒ£ If someone changed the password, ask them for the new one.\n\n5ï¸âƒ£ Reset your router to factory settings (small button on back, hold 10 seconds) - this returns it to the default password on the label.";
        }

        // General Wi-Fi / Internet Issues
        if (lower.includes("wifi") || lower.includes("wi-fi") || lower.includes("internet") || lower.includes("connection") || lower.includes("network") || lower.includes("online")) {
          return "Internet not working? Let's fix it:\n\n1ï¸âƒ£ Check if other devices have internet. If none work, the problem is your router or internet provider.\n\n2ï¸âƒ£ Unplug your router for 30 seconds, plug it back in, wait 3 minutes.\n\n3ï¸âƒ£ On your device, turn Wi-Fi off and back on.\n\n4ï¸âƒ£ Move closer to the router.\n\n5ï¸âƒ£ Forget the Wi-Fi network in settings, then reconnect and type the password again.\n\n6ï¸âƒ£ Restart your device.\n\n7ï¸âƒ£ If nothing works, call your internet provider.";
        }

        // Slow Computer / Performance
        if (lower.includes("slow") || lower.includes("lag") || lower.includes("performance") || lower.includes("freeze") || lower.includes("sluggish")) {
          return "A slow computer is usually caused by too many apps, limited storage, or background processes. Try this:\n\n1ï¸âƒ£ Close unused apps and browser tabs â€“ each one uses memory.\n\n2ï¸âƒ£ Restart your computer if you haven't recently â€“ this clears temporary files and memory.\n\n3ï¸âƒ£ Check free storage space (need at least 10-15% free). Delete large unused files, old downloads, or uninstall unused programs.\n\n4ï¸âƒ£ Disable startup programs that launch automatically (Task Manager > Startup on Windows, System Preferences > Users & Groups > Login Items on Mac).\n\n5ï¸âƒ£ Run Disk Cleanup (Windows) or optimize storage (Mac).\n\n6ï¸ï¿½ï¿½ï¿½ Check for malware using Windows Defender or your antivirus software.\n\n7ï¸âƒ£ Update your operating system and drivers.\n\n8ï¸âƒ£ Upgrade RAM if your computer has 4GB or less (especially for multitasking).\n\n9ï¸âƒ£ Consider an SSD upgrade if you're still using a traditional hard drive.";
        }

        // Email Issues
        if (lower.includes("email") || lower.includes("outlook") || lower.includes("gmail") || lower.includes("mail") || lower.includes("send") || lower.includes("receive")) {
          return "Let's fix your email problem:\n\n1ï¸âƒ£ Confirm you're connected to the internet â€“ try loading a website.\n\n2ï¸âƒ£ Check your Outbox or Drafts folder for stuck messages.\n\n3ï¸âƒ£ Verify your device's date and time are correct (incorrect time causes authentication failures).\n\n4ï¸âƒ£ Sign out of your email app completely and sign back in.\n\n5ï¸âƒ£ If you recently changed your password, update it in your email app settings.\n\n6ï¸âƒ£ Check your email storage quota â€“ full mailboxes can't receive new messages.\n\n7ï¸âƒ£ Verify your email server settings (IMAP/SMTP) are correct.\n\n8ï¸âƒ£ Disable VPN temporarily if you're using one.\n\n9ï¸âƒ£ Check your spam/junk folder â€“ messages might be filtered there.\n\nğŸ”Ÿ Try accessing email through a web browser to see if it's an app-specific issue.\n\n1ï¸âƒ£1ï¸âƒ£ Clear the email app cache (mobile) or reinstall the app.";
        }

        // App Crashes / Freezing
        if (lower.includes("crash") || lower.includes("freeze") || lower.includes("not responding") || lower.includes("stopped working") || lower.includes("hang")) {
          return "When an app keeps crashing or freezing, try this sequence:\n\n1ï¸âƒ£ Force close the app completely (don't just minimize) and reopen it.\n\n2ï¸âƒ£ Restart your device to clear temporary issues and free up memory.\n\n3ï¸âƒ£ Check for app updates in your app store or software updater.\n\n4ï¸âƒ£ Clear the app's cache and temporary files (Settings > Apps > [App Name] > Clear Cache).\n\n5ï¸âƒ£ Check if your operating system needs updates.\n\n6ï¸âƒ£ Free up storage space â€“ apps need room to operate.\n\n7ï¸âƒ£ Check if other apps are also crashing (might indicate a system issue).\n\n8ï¸âƒ£ Uninstall and reinstall the app (backup important data first).\n\n9ï¸âƒ£ Check the app's system requirements â€“ your device might not meet them.\n\nğŸ”Ÿ Disable any third-party plugins or extensions that might conflict.\n\n1ï¸âƒ£1ï¸âƒ£ Run the app in compatibility mode (Windows) if it's an older program.";
        }

        // Printer Problems
        if (lower.includes("print") || lower.includes("printer") || lower.includes("scan")) {
          return "Let's get your printer working:\n\n1ï¸âƒ£ Check basics â€“ is the printer powered on, has paper, and ink/toner?\n\n2ï¸âƒ£ Check the connection â€“ USB cable secure or Wi-Fi connected?\n\n3ï¸âƒ£ Restart both your computer and printer.\n\n4ï¸âƒ£ Set your printer as the default printer in system settings.\n\n5ï¸âƒ£ Clear the print queue â€“ cancel all pending jobs and try again.\n\n6ï¸âƒ£ Update or reinstall printer drivers from the manufacturer's website.\n\n7ï¸âƒ£ Run the printer troubleshooter (Windows: Settings > Update & Security > Troubleshoot).\n\n8ï¸âƒ£ Check for paper jams inside the printer.\n\n9ï¸âƒ£ For network printers, verify the IP address hasn't changed.\n\nğŸ”Ÿ Try printing a test page directly from the printer (without computer).\n\n1ï¸âƒ£1ï¸âƒ£ Disable VPN if you're using one â€“ it can block printer communication.\n\n1ï¸âƒ£2ï¸âƒ£ Check firewall settings aren't blocking the printer.";
        }

        // Frozen Screen
        if (lower.includes("frozen") || lower.includes("stuck") || lower.includes("unresponsive") || lower.includes("won't respond")) {
          return "When your screen is frozen:\n\n1ï¸âƒ£ Wait 30-60 seconds â€“ sometimes the system is just processing.\n\n2ï¸âƒ£ Try keyboard shortcuts:\n   â€¢ Windows: Ctrl+Alt+Delete, then Task Manager\n   â€¢ Mac: Command+Option+Escape to force quit apps\n\n3ï¸âƒ£ If mouse works, try closing the frozen app via Task Manager.\n\n4ï¸âƒ£ If completely frozen, force restart:\n   â€¢ Desktop: Hold power button 5-10 seconds\n   â€¢ Laptop: Hold power button 5-10 seconds\n   â€¢ Phone/Tablet: Hold power + volume down for 10 seconds\n\n5ï¸âƒ£ After restart, don't reopen all apps at once.\n\n6ï¸âƒ£ Check for system updates after restarting.\n\n7ï¸âƒ£ Run a disk check (Windows: chkdsk) or First Aid (Mac: Disk Utility).\n\n8ï¸âƒ£ If it happens frequently, check for overheating or hardware issues.\n\n9ï¸âƒ£ Scan for malware that might be consuming resources.";
        }

        // Password Reset
        if (lower.includes("password") || lower.includes("forgot") || lower.includes("login") || lower.includes("sign in") || lower.includes("locked out")) {
          return "Let's help you regain access:\n\n1ï¸âƒ£ Use the 'Forgot Password' or 'Reset Password' link on the login page.\n\n2ï¸âƒ£ Check your email (including spam folder) for the reset link.\n\n3ï¸âƒ£ Try alternate email addresses or phone numbers associated with the account.\n\n4ï¸âƒ£ Answer security questions if prompted.\n\n5ï¸âƒ£ For Windows login: Use another admin account or password reset disk if you created one.\n\n6ï¸âƒ£ For Mac login: Use your Apple ID to reset the password in Recovery Mode.\n\n7ï¸âƒ£ For work accounts: Contact your IT department or help desk.\n\n8ï¸âƒ£ Check if you saved the password in your browser's password manager.\n\n9ï¸âƒ£ Try common variations you might have used.\n\nğŸ”Ÿ Enable two-factor authentication after resetting to prevent future lockouts.\n\n1ï¸âƒ£1ï¸âƒ£ Use a password manager going forward to securely store passwords.";
        }

        // Battery Drain
        if (lower.includes("battery") || lower.includes("drain") || lower.includes("charge") || lower.includes("power")) {
          return "To improve battery life:\n\n1ï¸âƒ£ Check battery usage in settings to identify power-hungry apps.\n\n2ï¸âƒ£ Lower screen brightness or enable auto-brightness.\n\n3ï¸âƒ£ Turn off Wi-Fi, Bluetooth, and location services when not needed.\n\n4ï¸âƒ£ Close background apps you're not using.\n\n5ï¸âƒ£ Enable battery saver or low power mode.\n\n6ï¸âƒ£ Reduce screen timeout duration.\n\n7ï¸âƒ£ Disable push notifications for non-essential apps.\n\n8ï¸âƒ£ Turn off keyboard vibration and haptic feedback.\n\n9ï¸âƒ£ Keep your device updated â€“ updates often include battery optimizations.\n\nğŸ”Ÿ Avoid extreme temperatures (very hot or cold).\n\n1ï¸âƒ£1ï¸âƒ£ Calibrate your battery: fully drain, then fully charge without interruption.\n\n1ï¸âƒ£2ï¸âƒ£ Check for rogue apps running in background.\n\n1ï¸âƒ£3ï¸âƒ£ If battery is old (2-3+ years), it may need replacement.";
        }

        // Blue Screen (BSOD)
        if (lower.includes("blue screen") || lower.includes("bsod") || lower.includes("stop error")) {
          return "Blue Screen of Death (BSOD) troubleshooting:\n\n1ï¸âƒ£ Note the error code displayed (e.g., 'DRIVER_IRQL_NOT_LESS_OR_EQUAL').\n\n2ï¸âƒ£ Restart your computer â€“ it might be a one-time glitch.\n\n3ï¸âƒ£ Boot into Safe Mode (press F8 during startup) to diagnose.\n\n4ï¸âƒ£ Update all drivers, especially graphics, chipset, and network drivers.\n\n5ï¸âƒ£ Run Windows Memory Diagnostic to check for RAM issues.\n\n6ï¸âƒ£ Check for Windows updates and install them.\n\n7ï¸âƒ£ Uninstall recently installed software or drivers.\n\n8ï¸âƒ£ Run System File Checker: open Command Prompt as admin and type 'sfc /scannow'.\n\n9ï¸âƒ£ Check hard drive health using CHKDSK or manufacturer tools.\n\nğŸ”Ÿ Scan for malware with Windows Defender or antivirus.\n\n1ï¸âƒ£1ï¸âƒ£ Check for overheating â€“ clean dust from fans and vents.\n\n1ï¸âƒ£2ï¸âƒ£ Test RAM by removing one stick at a time if you have multiple.\n\n1ï¸âƒ£3ï¸âƒ£ If persistent, consider System Restore to a point before issues started.";
        }

        // No Sound / Audio Issues
        if (lower.includes("sound") || lower.includes("audio") || lower.includes("speaker") || lower.includes("volume") || lower.includes("hear")) {
          return "Let's fix your audio:\n\n1ï¸âƒ£ Check volume levels â€“ system volume, app volume, and physical volume buttons.\n\n2ï¸âƒ£ Ensure you're not muted (check system tray icon and app settings).\n\n3ï¸âƒ£ Check the correct output device is selected (speakers vs headphones).\n\n4ï¸âƒ£ Unplug and replug headphones/speakers to reset the connection.\n\n5ï¸âƒ£ Restart your device.\n\n6ï¸âƒ£ Update audio drivers (Windows: Device Manager > Sound controllers).\n\n7ï¸âƒ£ Run the audio troubleshooter (Windows: Settings > System > Sound > Troubleshoot).\n\n8ï¸âƒ£ Check if audio works in different apps to isolate the issue.\n\n9ï¸âƒ£ Disable audio enhancements (Sound settings > Properties > Enhancements > Disable all).\n\nğŸ”Ÿ Check for Windows updates.\n\n1ï¸âƒ£1ï¸âƒ£ Reinstall audio drivers if updating didn't work.\n\n1ï¸âƒ£2ï¸âƒ£ Check BIOS settings to ensure audio is enabled.\n\n1ï¸âƒ£3ï¸âƒ£ Test with different speakers/headphones to rule out hardware failure.";
        }

        // Camera / Webcam Issues
        if (lower.includes("camera") || lower.includes("webcam") || lower.includes("video") || lower.includes("zoom") || lower.includes("teams")) {
          return "Let's get your camera working:\n\n1ï¸âƒ£ Check if the camera is physically covered or has a privacy shutter closed.\n\n2ï¸âƒ£ Verify camera permissions are enabled for the app (Settings > Privacy > Camera).\n\n3ï¸âƒ£ Close other apps that might be using the camera.\n\n4ï¸âƒ£ Restart the app and your device.\n\n5ï¸âƒ£ Update camera drivers (Windows: Device Manager > Cameras).\n\n6ï¸âƒ£ Check if the camera works in other apps (Camera app, browser test).\n\n7ï¸âƒ£ Disable and re-enable the camera in Device Manager.\n\n8ï¸âƒ£ Check for Windows/macOS updates.\n\n9ï¸âƒ£ Scan for malware that might be blocking camera access.\n\nğŸ”Ÿ For external webcams, try a different USB port.\n\n1ï¸âƒ£1ï¸âƒ£ Check antivirus settings â€“ some block camera access for security.\n\n1ï¸âƒ£2ï¸âƒ£ Reinstall camera drivers.\n\n1ï¸âƒ£3ï¸âƒ£ For laptops, check if there's a function key (Fn) to enable/disable camera.";
        }

        // Bluetooth Issues
        if (lower.includes("bluetooth") || lower.includes("pairing") || lower.includes("wireless") || lower.includes("headphones") || lower.includes("airpods")) {
          return "Bluetooth troubleshooting:\n\n1ï¸âƒ£ Turn Bluetooth off and on again on both devices.\n\n2ï¸âƒ£ Make sure the Bluetooth device is in pairing mode (usually a flashing light).\n\n3ï¸âƒ£ Move devices closer together (within 3 feet for pairing).\n\n4ï¸âƒ£ Forget/unpair the device and pair it again from scratch.\n\n5ï¸âƒ£ Restart both your computer/phone and the Bluetooth device.\n\n6ï¸âƒ£ Charge the Bluetooth device â€“ low battery can cause connection issues.\n\n7ï¸âƒ£ Check if the device is already connected to another device.\n\n8ï¸âƒ£ Update Bluetooth drivers (Windows: Device Manager > Bluetooth).\n\n9ï¸âƒ£ Remove other paired devices to reduce interference.\n\nğŸ”Ÿ Turn off Wi-Fi temporarily â€“ it can interfere with Bluetooth.\n\n1ï¸âƒ£1ï¸âƒ£ Check for system updates.\n\n1ï¸âƒ£2ï¸âƒ£ Reset network settings (mobile devices).\n\n1ï¸âƒ£3ï¸âƒ£ Try pairing with a different device to isolate the problem.";
        }

        // Keyboard / Mouse Issues
        if (lower.includes("keyboard") || lower.includes("mouse") || lower.includes("trackpad") || lower.includes("typing") || lower.includes("cursor")) {
          return "Keyboard/Mouse troubleshooting:\n\n1ï¸âƒ£ Check the connection â€“ USB plugged in securely or wireless receiver connected.\n\n2ï¸âƒ£ For wireless devices, replace batteries or charge them.\n\n3ï¸âƒ£ Try a different USB port.\n\n4ï¸âƒ£ Restart your computer.\n\n5ï¸âƒ£ Clean the keyboard/mouse â€“ debris can cause issues.\n\n6ï¸âƒ£ For laptops, check if an external keyboard/mouse is overriding the built-in one.\n\n7ï¸âƒ£ Update or reinstall drivers (Device Manager > Keyboards/Mice).\n\n8ï¸âƒ£ Check if Num Lock, Caps Lock, or Function Lock is causing unexpected behavior.\n\n9ï¸âƒ£ Disable Filter Keys (Windows: Settings > Ease of Access > Keyboard).\n\nğŸ”Ÿ Test with a different keyboard/mouse to rule out hardware failure.\n\n1ï¸âƒ£1ï¸âƒ£ For wireless devices, re-pair them with the receiver.\n\n1ï¸âƒ£2ï¸âƒ£ Check BIOS settings to ensure USB ports are enabled.\n\n1ï¸âƒ£3ï¸âƒ£ Scan for malware that might be interfering with input devices.";
        }

        // Storage Full
        if (lower.includes("storage") || lower.includes("disk") || lower.includes("space") || lower.includes("full") || lower.includes("memory")) {
          return "Free up storage space:\n\n1ï¸âƒ£ Empty Recycle Bin/Trash.\n\n2ï¸âƒ£ Delete old downloads, documents, and media files you no longer need.\n\n3ï¸âƒ£ Uninstall unused programs and apps.\n\n4ï¸âƒ£ Clear browser cache and cookies.\n\n5ï¸âƒ£ Use Disk Cleanup (Windows) or Optimize Storage (Mac).\n\n6ï¸âƒ£ Delete temporary files (Windows: %temp% folder).\n\n7ï¸âƒ£ Move large files to external storage or cloud services.\n\n8ï¸âƒ£ Clear app caches (especially browsers, Spotify, photo apps).\n\n9ï¸âƒ£ Remove old system restore points (keep only the most recent).\n\nğŸ”Ÿ Compress large files or folders you want to keep.\n\n1ï¸âƒ£1ï¸âƒ£ Use storage analysis tools to find what's taking up space (WinDirStat, DaisyDisk).\n\n1ï¸âƒ£2ï¸âƒ£ Delete duplicate files.\n\n1ï¸âƒ£3ï¸âƒ£ Consider upgrading to a larger drive or adding external storage.";
        }

        // Software Installation Issues
        if (lower.includes("install") || lower.includes("update") || lower.includes("download") || lower.includes("setup")) {
          return "Software installation troubleshooting:\n\n1ï¸âƒ£ Run the installer as administrator (right-click > Run as administrator).\n\n2ï¸âƒ£ Temporarily disable antivirus â€“ it might be blocking the installation.\n\n3ï¸âƒ£ Check if you have enough free disk space.\n\n4ï¸âƒ£ Download the installer again â€“ the file might be corrupted.\n\n5ï¸âƒ£ Check system requirements â€“ your device might not meet them.\n\n6ï¸âƒ£ Close all other programs before installing.\n\n7ï¸âƒ£ Restart your computer and try again.\n\n8ï¸âƒ£ Check for Windows/macOS updates first.\n\n9ï¸âƒ£ Uninstall any previous versions of the software.\n\nğŸ”Ÿ Run Windows Update troubleshooter if Windows Update is failing.\n\n1ï¸âƒ£1ï¸âƒ£ Check your internet connection for online installers.\n\n1ï¸âƒ£2ï¸âƒ£ Disable VPN during installation.\n\n1ï¸âƒ£3ï¸âƒ£ Check the software vendor's website for known installation issues.\n\n1ï¸âƒ£4ï¸âƒ£ Try installing in Safe Mode if normal mode fails.";
        }

        // Screen Issues
        if (lower.includes("screen") || lower.includes("display") || lower.includes("monitor") || lower.includes("resolution")) {
          return "Display troubleshooting:\n\n1ï¸âƒ£ Check all cable connections (HDMI, DisplayPort, VGA).\n\n2ï¸âƒ£ Try a different cable or port.\n\n3ï¸âƒ£ Adjust brightness settings.\n\n4ï¸âƒ£ Update graphics drivers.\n\n5ï¸âƒ£ Change screen resolution (Settings > Display).\n\n6ï¸âƒ£ Check if the monitor is set to the correct input source.\n\n7ï¸âƒ£ Restart your computer.\n\n8ï¸âƒ£ For multiple monitors, detect displays in settings.\n\n9ï¸âƒ£ Try the monitor with a different computer to rule out monitor issues.\n\nğŸ”Ÿ Check for Windows/macOS updates.\n\n1ï¸âƒ£1ï¸âƒ£ Disable and re-enable the display adapter in Device Manager.\n\n1ï¸âƒ£2ï¸âƒ£ Boot into Safe Mode to see if it's a driver issue.\n\n1ï¸âƒ£3ï¸âƒ£ Reset display settings to default.";
        }

        // Overheating
        if (lower.includes("hot") || lower.includes("heat") || lower.includes("overheat") || lower.includes("fan") || lower.includes("temperature")) {
          return "Overheating solutions:\n\n1ï¸âƒ£ Ensure air vents are not blocked â€“ use laptop on hard, flat surfaces.\n\n2ï¸âƒ£ Clean dust from vents and fans using compressed air.\n\n3ï¸âƒ£ Close resource-intensive programs and browser tabs.\n\n4ï¸âƒ£ Use a laptop cooling pad.\n\n5ï¸âƒ£ Check Task Manager for processes using high CPU.\n\n6ï¸âƒ£ Update BIOS and drivers.\n\n7ï¸âƒ£ Reduce screen brightness.\n\n8ï¸âƒ£ Work in a cooler environment.\n\n9ï¸âƒ£ Check if fans are running (you should hear them under load).\n\nğŸ”Ÿ Reapply thermal paste if you're comfortable opening the device (or have a professional do it).\n\n1ï¸âƒ£1ï¸âƒ£ Limit gaming or video editing sessions.\n\n1ï¸âƒ£2ï¸âƒ£ Check for malware that might be using resources.\n\n1ï¸âƒ£3ï¸âƒ£ Consider undervolting (advanced users) to reduce heat.";
        }

        // VPN Issues
        if (lower.includes("vpn") || lower.includes("virtual private")) {
          return "VPN troubleshooting:\n\n1ï¸âƒ£ Disconnect and reconnect to the VPN.\n\n2ï¸âƒ£ Try a different VPN server location.\n\n3ï¸âƒ£ Restart the VPN app.\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Check your internet connection without VPN first.\n\n6ï¸âƒ£ Update the VPN app to the latest version.\n\n7ï¸âƒ£ Try a different VPN protocol (OpenVPN, IKEv2, WireGuard).\n\n8ï¸âƒ£ Temporarily disable firewall or antivirus.\n\n9ï¸âƒ£ Check if your network blocks VPN traffic.\n\nğŸ”Ÿ Clear VPN app cache and data.\n\n1ï¸âƒ£1ï¸âƒ£ Reinstall the VPN app.\n\n1ï¸âƒ£2ï¸âƒ£ Check VPN subscription status.\n\n1ï¸âƒ£3ï¸âƒ£ Contact VPN support if issues persist.";
        }

        // USB Issues
        if (lower.includes("usb") || lower.includes("flash drive") || lower.includes("external drive")) {
          return "USB device troubleshooting:\n\n1ï¸âƒ£ Try a different USB port.\n\n2ï¸âƒ£ Try the device on another computer.\n\n3ï¸âƒ£ Restart your computer with the device unplugged, then plug it in.\n\n4ï¸âƒ£ Check Device Manager for errors (yellow exclamation marks).\n\n5ï¸âƒ£ Update USB drivers.\n\n6ï¸âƒ£ Check if the device appears in Disk Management (Windows) or Disk Utility (Mac).\n\n7ï¸âƒ£ Assign a drive letter if missing (Disk Management).\n\n8ï¸âƒ£ Run hardware troubleshooter.\n\n9ï¸âƒ£ Check for physical damage to the USB port or device.\n\nğŸ”Ÿ Disable USB selective suspend (Power Options > Advanced).\n\n1ï¸âƒ£1ï¸âƒ£ Update chipset drivers.\n\n1ï¸âƒ£2ï¸âƒ£ Check BIOS settings for USB configuration.";
        }

        // Default / General Response
        return "Thanks for the details. To help you better, I need a bit more information:\n\n1ï¸âƒ£ What exactly happens? (Error message, nothing happens, unexpected behavior?)\n\n2ï¸âƒ£ What device are you using? (Windows PC, Mac, iPhone, Android, etc.)\n\n3ï¸âƒ£ When did this start? (After an update, always been this way, suddenly today?)\n\n4ï¸âƒ£ What have you already tried?\n\nReply with these details and I'll provide specific step-by-step solutions. You can also click one of the category buttons above to get targeted help for common issues!";
      }

      function handleUserSubmit(text) {
        if (!text || !text.trim()) {
          showError("Please describe your tech issue so I can help.");
          return;
        }
        const cleaned = text.trim();
        addMessage("user", cleaned);
        setSending(true);

        setTimeout(() => {
          const reply = generateAssistantReply(cleaned);
          addMessage("assistant", reply);
          setSending(false);
        }, 800);
      }

      if (inputForm) {
        inputForm.addEventListener("submit", function (event) {
          event.preventDefault();
          handleUserSubmit(inputField.value);
          inputField.value = "";
          inputField.style.height = "auto";
        });
      }

      if (inputField) {
        inputField.addEventListener("input", function () {
          this.style.height = "auto";
          this.style.height = this.scrollHeight + "px";
        });
      }

      // Category buttons
      document.addEventListener("click", function (e) {
        const btn = e.target.closest(".category-btn");
        if (!btn) return;
        const prompt = btn.getAttribute("data-prompt");
        if (!prompt) return;
        if (inputField) {
          inputField.value = prompt;
          inputField.style.height = "auto";
          inputField.style.height = inputField.scrollHeight + "px";
          inputField.focus();
        }
      });

      // Back button
      if (backBtn) {
        backBtn.addEventListener("click", function() {
          // Clear all messages except the initial assistant message
          const messages = chatContainer.querySelectorAll('[data-role]');
          messages.forEach((msg, index) => {
            if (index > 0) { // Keep first message
              msg.remove();
            }
          });
          
          // Show welcome block
          if (welcomeBlock) {
            welcomeBlock.classList.remove("hidden");
          }
          
          // Hide back button
          backBtn.classList.add("hidden");
          backBtn.classList.remove("flex");
          
          // Clear input
          if (inputField) {
            inputField.value = "";
            inputField.style.height = "auto";
          }
          
          // Scroll to top
          chatContainer.scrollTop = 0;
        });
      }

      // --- Element SDK: config-driven text, colors, font, size ---

      const defaultConfig = {
        main_title: "Tech Support Assistant",
        welcome_title: "Hi, I'm your tech assistant ğŸ”§",
        welcome_body:
          "Describe what's going wrong with your computer, phone, or apps, and I'll walk you through simple, stepâ€‘byâ€‘step fixes.",
        placeholder_text: "Ask a question about your device, app, or setup...",
        primary_button_text: "Send",
        footer_text:
          "Responses are suggestions only. For sensitive systems, confirm steps with your IT team first.",
        // Colors
        background_color: "#1a1a2e",
        surface_color: "#0f3460",
        text_color: "#ffffff",
        primary_action_color: "#e94560",
        secondary_action_color: "#533483",
        // Font
        font_family: "system-ui",
        font_size: 14
      };

      async function onConfigChange(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});

        const root = document.body;
        if (root) {
          root.style.backgroundColor = cfg.background_color;
        }

        const container = document.querySelector("div.h-full.flex.flex-col");
        if (container) {
          container.style.backgroundColor = cfg.background_color;
        }

        const headers = document.querySelectorAll("header");
        headers.forEach((el) => {
          el.style.backgroundColor = cfg.surface_color;
          el.style.borderBottomColor = cfg.primary_action_color;
        });

        const footerSection = document.querySelector(
          "section[aria-label='Ask a tech support question']"
        );
        if (footerSection) {
          footerSection.style.backgroundColor = cfg.surface_color;
          footerSection.style.borderTopColor = cfg.secondary_action_color;
        }

        const textEls = document.querySelectorAll("body, p, span, label, h1, h2, button");
        textEls.forEach((el) => {
          el.style.color = cfg.text_color;
        });

        // Primary button
        if (sendBtn) {
          sendBtn.style.backgroundColor = cfg.primary_action_color;
        }

        // Back button
        if (backBtn) {
          backBtn.style.backgroundColor = cfg.secondary_action_color;
        }

        // Category buttons and some avatars
        const categoryButtons = document.querySelectorAll(".category-btn");
        categoryButtons.forEach((btn) => {
          btn.style.backgroundColor = cfg.secondary_action_color;
        });
        const assistantAvatars = document.querySelectorAll(
          ".message-avatar.bg-\\[\\#533483\\]"
        );
        assistantAvatars.forEach((el) => {
          el.style.backgroundColor = cfg.secondary_action_color;
        });

        // Text content
        if (mainTitleEl) {
          mainTitleEl.textContent = cfg.main_title || defaultConfig.main_title;
        }
        if (welcomeTitleEl) {
          welcomeTitleEl.textContent =
            cfg.welcome_title || defaultConfig.welcome_title;
        }
        if (welcomeBodyEl) {
          welcomeBodyEl.textContent =
            cfg.welcome_body || defaultConfig.welcome_body;
        }
        if (inputField) {
          inputField.placeholder =
            cfg.placeholder_text || defaultConfig.placeholder_text;
        }
        if (sendText) {
          sendText.textContent =
            cfg.primary_button_text || defaultConfig.primary_button_text;
        }
        if (footerTextEl) {
          footerTextEl.textContent =
            cfg.footer_text || defaultConfig.footer_text;
        }

        // Font + size
        const baseFont =
          (cfg.font_family && cfg.font_family.trim()) || defaultConfig.font_family;
        const baseSize = Number.isFinite(cfg.font_size)
          ? cfg.font_size
          : defaultConfig.font_size;
        const fontStack = baseFont + ", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif";

        document.documentElement.style.fontFamily = fontStack;

        if (mainTitleEl) {
          mainTitleEl.style.fontSize = baseSize * 1.7 + "px";
        }
        if (welcomeTitleEl) {
          welcomeTitleEl.style.fontSize = baseSize * 1.5 + "px";
        }
        if (welcomeBodyEl) {
          welcomeBodyEl.style.fontSize = baseSize * 1.0 + "px";
        }
        if (inputField) {
          inputField.style.fontSize = baseSize * 0.95 + "px";
        }
        const labels = document.querySelectorAll("label");
        labels.forEach((el) => {
          el.style.fontSize = baseSize * 0.85 + "px";
        });
        const smallTexts = document.querySelectorAll(
          "#cc-footer-text, .message-time"
        );
        smallTexts.forEach((el) => {
          el.style.fontSize = baseSize * 0.8 + "px";
        });
      }

      function mapToCapabilities(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});

        const recolorables = [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => {
              cfg.background_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_color: value });
              }
            }
          },
          {
            get: () => cfg.surface_color || defaultConfig.surface_color,
            set: (value) => {
              cfg.surface_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ surface_color: value });
              }
            }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => {
              cfg.text_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          },
          {
            get: () =>
              cfg.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              cfg.primary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            }
          },
          {
            get: () =>
              cfg.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              cfg.secondary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          }
        ];

        const fontEditable = {
          get: () => cfg.font_family || defaultConfig.font_family,
          set: (value) => {
            cfg.font_family = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_family: value });
            }
          }
        };

        const fontSizeable = {
          get: () => cfg.font_size || defaultConfig.font_size,
          set: (value) => {
            cfg.font_size = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        };

        return {
          recolorables,
          borderables: [],
          fontEditable,
          fontSizeable
        };
      }

      function mapToEditPanelValues(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});
        return new Map([
          ["main_title", cfg.main_title],
          ["welcome_title", cfg.welcome_title],
          ["welcome_body", cfg.welcome_body],
          ["placeholder_text", cfg.placeholder_text],
          ["primary_button_text", cfg.primary_button_text],
          ["footer_text", cfg.footer_text]
        ]);
      }

      if (window.elementSdk && typeof window.elementSdk.init === "function") {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      } else {
        // Fallback: apply defaults immediately if SDK not available
        onConfigChange(defaultConfig);
      }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a10cf6467a76cda',t:'MTc2MzU2Njg2OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
