<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>Tech Support Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
      body {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
      }
      * {
        box-sizing: border-box;
      }
      /* Custom scrollbar for chat - highly visible */
      .cc-scroll::-webkit-scrollbar {
        width: 14px;
      }
      .cc-scroll::-webkit-scrollbar-track {
        background: #16213e;
        border-radius: 10px;
        border: 1px solid #533483;
      }
      .cc-scroll::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, #e94560 0%, #533483 100%);
        border-radius: 10px;
        border: 2px solid #16213e;
      }
      .cc-scroll::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(180deg, #f25b72 0%, #6d44a8 100%);
      }
      /* Firefox scrollbar */
      .cc-scroll {
        scrollbar-width: auto;
        scrollbar-color: #e94560 #16213e;
      }

      @keyframes cc-slide-in {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .cc-message-anim {
        animation: cc-slide-in 0.25s ease-out;
      }

      .cc-focus-visible:focus-visible {
        outline: 2px solid #e94560;
        outline-offset: 2px;
      }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div class="h-full flex flex-col bg-[#1a1a2e]">
   <header class="flex-shrink-0 border-b-2 border-[#e94560] bg-[#0f3460] text-[#e94560]" role="banner">
    <div class="max-w-5xl mx-auto px-6 py-4 flex items-center justify-between gap-4">
     <div class="flex items-center gap-3"><button id="cc-back-btn" type="button" class="cc-focus-visible hidden items-center justify-center h-9 w-9 rounded-full bg-[#533483] hover:bg-[#6d44a8] text-white transition" aria-label="Go back to welcome screen"> â† </button>
      <h1 id="cc-main-title" class="text-xl font-semibold">Tech Support Assistant</h1>
     </div>
     <div class="inline-flex items-center gap-2 text-xs text-white/80 bg-[#16213e] px-3 py-1.5 rounded-full"><span class="inline-flex h-2 w-2 rounded-full bg-[#22c55e]" aria-hidden="true"></span> <span>Online helper</span>
     </div>
    </div>
   </header>
   <main class="flex-1 min-h-0 flex flex-col" role="main">
    <section aria-label="Chat conversation" class="flex-1 min-h-0 overflow-hidden">
     <div id="cc-chat-container" class="cc-scroll max-w-5xl mx-auto px-6 py-6 flex flex-col gap-4 overflow-y-auto h-full">
      <article id="cc-welcome" class="text-center text-white max-w-xl mx-auto mt-6 bg-[#16213e]/70 rounded-2xl px-6 py-8 shadow-lg">
       <h2 id="cc-welcome-title" class="text-2xl font-semibold text-[#e94560] mb-2">Hi, I'm your tech assistant ğŸ”§</h2>
       <p id="cc-welcome-body" class="text-sm text-white/80 mb-4 leading-relaxed">Describe what's going wrong with your computer, phone, or apps, and I'll walk you through simple, stepâ€‘byâ€‘step fixes.</p>
       <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 text-left text-xs" aria-label="Quick help categories"><button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My Wiâ€‘Fi keeps disconnecting every few minutes"> ğŸ›œ Wiâ€‘Fi Drops </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My computer takes forever to start up"> ğŸ–¥ï¸ Slow Startup </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My email won't send messages"> ğŸ“§ Email Won't Send </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My app closes by itself"> âš™ï¸ App Crashes </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My printer won't print"> ğŸ–¨ï¸ Printer Issues </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My screen is completely frozen"> ğŸ”’ Frozen Screen </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I forgot my password and can't log in"> ğŸ”‘ Forgot Password </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My phone battery dies too fast"> ğŸ”‹ Battery Drains </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I'm getting a blue screen error on Windows"> ğŸ’™ Blue Screen </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I can't hear any sound from my computer"> ğŸ”Š No Sound </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My webcam shows a black screen"> ğŸ“· Camera Black </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My Bluetooth headphones won't pair"> ğŸ“¡ Bluetooth Pairing </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My keyboard keys aren't working"> âŒ¨ï¸ Keyboard Issues </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My computer says storage is full"> ğŸ’¾ Storage Full </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="Software won't install on my computer"> ğŸ“¦ Can't Install </button>
       </div>
      </article>
      <div class="flex items-start gap-3 max-w-xl cc-message-anim" data-role="assistant-message">
       <div class="message-avatar flex items-center justify-center h-9 w-9 rounded-full bg-[#533483] text-white text-lg flex-shrink-0" aria-hidden="true">
        ğŸ¤–
       </div>
       <div class="flex-1">
        <div class="message-content bg-[#0f3460] text-white rounded-2xl rounded-bl-sm px-4 py-3 text-sm leading-relaxed">
         <p>I'm here to help you fix tech problems. Just tell me what's wrong in simple words, and I'll give you easy steps to follow.</p>
        </div>
        <p class="message-time text-[11px] text-white/60 mt-1">Assistant Â· just now</p>
       </div>
      </div>
     </div>
    </section>
    <section aria-label="Ask a tech support question" class="flex-shrink-0 border-t-2 border-[#533483] bg-[#0f3460]">
     <div class="max-w-5xl mx-auto px-6 py-4 space-y-2">
      <form id="cc-input-form" class="w-full" novalidate>
       <div class="flex items-end gap-3">
        <div class="flex-1"><label for="cc-input" class="block text-xs font-medium text-white/70 mb-1">Type your tech question</label>
         <div class="flex items-center gap-2 bg-[#1a1a2e] border-2 border-[#533483] rounded-full px-4 py-2.5 focus-within:border-[#e94560] transition"><textarea id="cc-input" rows="1" class="input-field block w-full bg-transparent border-none outline-none text-sm text-white placeholder:text-white/40 resize-none" placeholder="Ask a question about your device, app, or setup..."></textarea>
         </div>
        </div><button id="cc-send-btn" type="submit" class="cc-focus-visible inline-flex items-center justify-center bg-[#e94560] hover:bg-[#f25b72] text-white font-semibold text-sm px-5 py-2.5 rounded-full whitespace-nowrap transition disabled:opacity-60 disabled:cursor-not-allowed"> <span id="cc-send-text">Send</span> <span id="cc-send-spinner" class="hidden ml-2 h-4 w-4 border-2 border-white/40 border-t-white rounded-full animate-spin" aria-hidden="true"></span> </button>
       </div>
      </form>
      <p id="cc-footer-text" class="text-[11px] text-white/50 text-left">Responses are suggestions only. For sensitive systems, confirm steps with your IT team first.</p>
      <p id="cc-error" class="hidden text-xs text-[#fed7d7] bg-[#7f1d1d]/60 border border-[#fecaca] rounded-md px-3 py-1.5"></p>
     </div>
    </section>
   </main>
  </div>
  <script>
      const chatContainer = document.getElementById("cc-chat-container");
      const inputForm = document.getElementById("cc-input-form");
      const inputField = document.getElementById("cc-input");
      const sendBtn = document.getElementById("cc-send-btn");
      const sendText = document.getElementById("cc-send-text");
      const sendSpinner = document.getElementById("cc-send-spinner");
      const errorBox = document.getElementById("cc-error");
      const welcomeBlock = document.getElementById("cc-welcome");
      const backBtn = document.getElementById("cc-back-btn");

      const welcomeTitleEl = document.getElementById("cc-welcome-title");
      const welcomeBodyEl = document.getElementById("cc-welcome-body");
      const mainTitleEl = document.getElementById("cc-main-title");
      const footerTextEl = document.getElementById("cc-footer-text");

      function showError(message) {
        if (!errorBox) return;
        errorBox.textContent = message;
        errorBox.classList.remove("hidden");
        setTimeout(() => {
          errorBox.classList.add("hidden");
        }, 3000);
      }

      function setSending(isSending) {
        if (!sendBtn) return;
        sendBtn.disabled = isSending;
        if (isSending) {
          sendSpinner.classList.remove("hidden");
        } else {
          sendSpinner.classList.add("hidden");
        }
      }

      function addMessage(role, text) {
        if (!chatContainer) return;

        if (welcomeBlock && !welcomeBlock.classList.contains("hidden")) {
          welcomeBlock.classList.add("hidden");
          if (backBtn) {
            backBtn.classList.remove("hidden");
            backBtn.classList.add("flex");
          }
        }

        const wrapper = document.createElement("div");
        wrapper.className =
          "flex items-start gap-3 max-w-xl cc-message-anim " +
          (role === "user" ? "ml-auto flex-row-reverse" : "");
        wrapper.setAttribute("data-role", role + "-message");

        const avatar = document.createElement("div");
        avatar.className =
          "message-avatar flex items-center justify-center h-9 w-9 rounded-full text-white text-lg flex-shrink-0 " +
          (role === "user" ? "bg-[#e94560]" : "bg-[#533483]");
        avatar.textContent = role === "user" ? "ğŸ‘¤" : "ğŸ¤–";

        const body = document.createElement("div");
        body.className = "flex-1";

        const bubble = document.createElement("div");
        bubble.className =
          "message-content text-white rounded-2xl px-4 py-3 text-sm leading-relaxed " +
          (role === "user"
            ? "bg-[#e94560] rounded-br-sm"
            : "bg-[#0f3460] rounded-bl-sm");
        
        const lines = text.split('\n');
        lines.forEach((line, index) => {
          if (line.trim()) {
            const p = document.createElement('p');
            p.textContent = line;
            if (index > 0) p.className = 'mt-2';
            bubble.appendChild(p);
          }
        });

        const time = document.createElement("p");
        time.className = "message-time text-[11px] text-white/60 mt-1";
        const timestamp = new Date();
        const minutes = timestamp.getMinutes().toString().padStart(2, "0");
        const hours = timestamp.getHours().toString().padStart(2, "0");
        time.textContent =
          (role === "user" ? "You" : "Assistant") + " Â· " + hours + ":" + minutes;

        body.appendChild(bubble);
        body.appendChild(time);
        wrapper.appendChild(avatar);
        wrapper.appendChild(body);

        chatContainer.appendChild(wrapper);
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }

      function generateAssistantReply(message) {
        const lower = message.toLowerCase();

        if (lower.includes("wifi keeps disconnecting") || lower.includes("wi-fi drops") || lower.includes("connection drops") || lower.includes("keeps losing connection")) {
          return "Your Wi-Fi keeps dropping? Here's the fix:\n\n1ï¸âƒ£ Move closer to your router. Walls block the signal.\n\n2ï¸âƒ£ Unplug your router, wait 30 seconds, plug it back in. Wait 3 minutes.\n\n3ï¸âƒ£ On your device, turn Wi-Fi off, wait 5 seconds, turn it back on.\n\n4ï¸âƒ£ Too many devices? Turn off Wi-Fi on devices you're not using.\n\n5ï¸âƒ£ Check if your router is overheating. Make sure it has space around it for air.\n\n6ï¸âƒ£ Update your router's software (check the manual or call your internet provider).";
        }

        if (lower.includes("wifi connected but no internet") || lower.includes("connected but can't browse") || lower.includes("no internet access")) {
          return "Connected to Wi-Fi but can't open websites? Try this:\n\n1ï¸âƒ£ Unplug your router for 30 seconds, then plug it back in.\n\n2ï¸âƒ£ On your device, turn Wi-Fi off and back on.\n\n3ï¸âƒ£ Try opening a different website - maybe just that one site is down.\n\n4ï¸âƒ£ Check if other devices can access the internet. If not, call your internet provider.\n\n5ï¸âƒ£ Restart your device completely.";
        }

        if ((lower.includes("wrong password") || lower.includes("incorrect password")) && (lower.includes("wifi") || lower.includes("wi-fi"))) {
          return "Wi-Fi password not working?\n\n1ï¸âƒ£ Check if Caps Lock is ON. Passwords care about capital letters.\n\n2ï¸âƒ£ Look at your router - there's usually a sticker on the bottom or back with the password.\n\n3ï¸âƒ£ Type the password in Notes first so you can see it, then copy and paste it.\n\n4ï¸âƒ£ Make sure you're typing the exact password - no extra spaces.\n\n5ï¸âƒ£ If someone changed it, ask them for the new password.";
        }

        if (lower.includes("wifi slow") || lower.includes("internet slow") || lower.includes("slow connection")) {
          return "Internet running slow?\n\n1ï¸âƒ£ Move closer to your router.\n\n2ï¸âƒ£ Close apps and browser tabs you're not using.\n\n3ï¸âƒ£ Restart your router - unplug for 30 seconds.\n\n4ï¸âƒ£ Check how many devices are using Wi-Fi. Each one slows it down.\n\n5ï¸âƒ£ Run a speed test (search 'speed test' on Google). If it's much slower than what you pay for, call your provider.";
        }

        if (lower.includes("wifi") || lower.includes("wi-fi") || lower.includes("internet") || lower.includes("connection") || lower.includes("network") || lower.includes("online")) {
          return "Internet not working? Let's fix it:\n\n1ï¸âƒ£ Check if other devices have internet. If nothing works, it's your router or internet provider.\n\n2ï¸âƒ£ Unplug your router for 30 seconds, plug it back in, wait 3 minutes.\n\n3ï¸âƒ£ On your device, turn Wi-Fi off and back on.\n\n4ï¸âƒ£ Move closer to the router.\n\n5ï¸âƒ£ Restart your device.\n\n6ï¸âƒ£ If still not working, call your internet provider.";
        }

        if (lower.includes("slow startup") || lower.includes("takes forever to start") || lower.includes("slow boot") || lower.includes("long to start")) {
          return "Computer takes forever to start?\n\n1ï¸âƒ£ Too many programs start automatically. Stop them:\n   â€¢ Windows: Press Ctrl+Shift+Esc, click 'Startup', turn off programs you don't need\n   â€¢ Mac: Apple menu > System Preferences > Users & Groups > Login Items, remove programs\n\n2ï¸âƒ£ Restart your computer.\n\n3ï¸âƒ£ Make sure you have free space on your hard drive (at least 15%).\n\n4ï¸âƒ£ Update Windows or macOS.\n\n5ï¸âƒ£ If it's still slow, your hard drive might be old and needs replacing.";
        }

        if (lower.includes("browser slow") || lower.includes("chrome slow") || lower.includes("firefox slow") || lower.includes("edge slow") || lower.includes("safari slow")) {
          return "Browser running slow?\n\n1ï¸âƒ£ Close tabs you're not using. Each tab uses memory.\n\n2ï¸âƒ£ Clear your browsing history:\n   â€¢ Press Ctrl+Shift+Delete (or Cmd+Shift+Delete on Mac)\n   â€¢ Select 'All time'\n   â€¢ Check 'Cookies' and 'Cached images'\n   â€¢ Click 'Clear data'\n\n3ï¸âƒ£ Turn off extensions you don't use (click the puzzle piece icon).\n\n4ï¸âƒ£ Update your browser.\n\n5ï¸âƒ£ Close the browser completely and reopen it.";
        }

        if (lower.includes("100% disk") || lower.includes("disk usage") || lower.includes("disk at 100")) {
          return "Hard drive at 100%? This makes everything slow:\n\n1ï¸âƒ£ Restart your computer first.\n\n2ï¸âƒ£ Press Ctrl+Shift+Esc, click the 'Disk' column to see what's using it.\n\n3ï¸âƒ£ Update Windows (Settings > Update & Security > Check for updates).\n\n4ï¸âƒ£ Run a virus scan with Windows Defender.\n\n5ï¸âƒ£ If it keeps happening, your hard drive might be failing - back up your important files now.";
        }

        if (lower.includes("fan loud") || lower.includes("fan noise") || lower.includes("loud fan")) {
          return "Computer fan really loud?\n\n1ï¸âƒ£ Close programs you're not using - they make the computer work hard.\n\n2ï¸âƒ£ Make sure air vents aren't blocked. Don't use laptop on bed or couch.\n\n3ï¸âƒ£ Clean dust from vents with compressed air (buy at any store).\n\n4ï¸âƒ£ Put your laptop on a hard, flat surface.\n\n5ï¸âƒ£ If it's always loud, the fan might need replacing.";
        }

        if (lower.includes("slow") || lower.includes("lag") || lower.includes("performance") || lower.includes("sluggish")) {
          return "Computer running slow?\n\n1ï¸âƒ£ Close programs you're not using.\n\n2ï¸âƒ£ Restart your computer. This fixes most slowness.\n\n3ï¸âƒ£ Check your storage - you need at least 15% free space. Delete old files.\n\n4ï¸âƒ£ Stop programs from starting automatically:\n   â€¢ Windows: Ctrl+Shift+Esc > Startup\n   â€¢ Mac: System Preferences > Users & Groups > Login Items\n\n5ï¸âƒ£ Update your computer (Windows Update or Mac Software Update).\n\n6ï¸âƒ£ Run a virus scan.";
        }

        if (lower.includes("email won't send") || lower.includes("can't send email") || lower.includes("email stuck")) {
          return "Can't send emails?\n\n1ï¸âƒ£ Check your internet connection - try opening a website.\n\n2ï¸âƒ£ Check your Outbox folder - delete any stuck messages there.\n\n3ï¸âƒ£ Make sure the email address you're sending to is typed correctly.\n\n4ï¸âƒ£ Check if your email is full - delete old emails to make space.\n\n5ï¸âƒ£ Sign out of your email and sign back in.\n\n6ï¸âƒ£ If you changed your password recently, update it in your email app.";
        }

        if (lower.includes("email won't receive") || lower.includes("not receiving email") || lower.includes("emails not coming")) {
          return "Not receiving emails?\n\n1ï¸âƒ£ Check your Spam or Junk folder - emails might be there.\n\n2ï¸âƒ£ Check if your inbox is full - delete old emails.\n\n3ï¸âƒ£ Make sure you're connected to the internet.\n\n4ï¸âƒ£ Try sending yourself an email to test.\n\n5ï¸âƒ£ Sign out and sign back in.\n\n6ï¸âƒ£ Check if the sender's email address is blocked.";
        }

        if (lower.includes("forgot email password") || lower.includes("can't log into email")) {
          return "Can't log into your email?\n\n1ï¸âƒ£ Click 'Forgot Password' on the login page.\n\n2ï¸âƒ£ Check your phone for a text message with a code.\n\n3ï¸âƒ£ Check your backup email for a reset link.\n\n4ï¸âƒ£ Try your old passwords - you might remember one.\n\n5ï¸âƒ£ For Gmail: Go to google.com/accounts/recovery\n   For Outlook: Go to account.live.com/password/reset";
        }

        if (lower.includes("email") || lower.includes("outlook") || lower.includes("gmail") || lower.includes("mail")) {
          return "Email problem? Let's fix it:\n\n1ï¸âƒ£ Check your internet connection.\n\n2ï¸âƒ£ Check your Spam/Junk folder.\n\n3ï¸âƒ£ Sign out and sign back in.\n\n4ï¸âƒ£ Make sure your device's date and time are correct.\n\n5ï¸âƒ£ Update your email app.\n\n6ï¸âƒ£ Try accessing email through a web browser instead of the app.";
        }

        if (lower.includes("app closes by itself") || lower.includes("app keeps closing") || lower.includes("app shuts down")) {
          return "App keeps closing by itself?\n\n1ï¸âƒ£ Close the app completely (don't just minimize it) and open it again.\n\n2ï¸âƒ£ Restart your device.\n\n3ï¸âƒ£ Update the app (check your app store).\n\n4ï¸âƒ£ Clear the app's cache:\n   â€¢ iPhone: Delete and reinstall the app\n   â€¢ Android: Settings > Apps > [App name] > Clear cache\n\n5ï¸âƒ£ Make sure you have enough storage space.\n\n6ï¸âƒ£ If it still crashes, delete and reinstall the app.";
        }

        if (lower.includes("app won't open") || lower.includes("app doesn't open") || lower.includes("can't open app")) {
          return "App won't open?\n\n1ï¸âƒ£ Restart your device.\n\n2ï¸âƒ£ Update the app in your app store.\n\n3ï¸âƒ£ Check if your device's operating system needs an update.\n\n4ï¸âƒ£ Delete the app and download it again.\n\n5ï¸âƒ£ Make sure you have enough storage space.\n\n6ï¸âƒ£ Check if the app works on your device (some apps need newer phones).";
        }

        if (lower.includes("crash") || lower.includes("freeze") || lower.includes("not responding") || lower.includes("stopped working") || lower.includes("hang")) {
          return "App crashing or freezing?\n\n1ï¸âƒ£ Close the app completely and reopen it.\n\n2ï¸âƒ£ Restart your device.\n\n3ï¸âƒ£ Update the app.\n\n4ï¸âƒ£ Clear the app's cache (Settings > Apps > Clear cache).\n\n5ï¸âƒ£ Make sure you have free storage space.\n\n6ï¸âƒ£ Delete and reinstall the app (backup important data first).";
        }

        if (lower.includes("printer offline") || lower.includes("printer says offline")) {
          return "Printer says offline?\n\n1ï¸âƒ£ Turn the printer off, wait 10 seconds, turn it back on.\n\n2ï¸âƒ£ Check the cable is plugged in (or Wi-Fi is connected).\n\n3ï¸âƒ£ On your computer:\n   â€¢ Windows: Settings > Devices > Printers > Right-click your printer > 'Use printer online'\n   â€¢ Mac: System Preferences > Printers > Delete printer and add it again\n\n4ï¸âƒ£ Restart your computer.\n\n5ï¸âƒ£ Make sure printer and computer are on the same Wi-Fi network.";
        }

        if (lower.includes("printer won't print") || lower.includes("nothing prints") || lower.includes("printer not printing")) {
          return "Printer won't print?\n\n1ï¸âƒ£ Check basics: Is it turned on? Does it have paper? Does it have ink?\n\n2ï¸âƒ£ Check the cable is plugged in (or Wi-Fi is connected).\n\n3ï¸âƒ£ Cancel all print jobs:\n   â€¢ Windows: Settings > Devices > Printers > Open queue > Cancel all\n   â€¢ Mac: System Preferences > Printers > Open print queue > Cancel all\n\n4ï¸âƒ£ Restart the printer and your computer.\n\n5ï¸âƒ£ Try printing a test page from the printer itself (no computer).";
        }

        if (lower.includes("paper jam") || lower.includes("jammed")) {
          return "Paper jammed in printer?\n\n1ï¸âƒ£ Turn off the printer.\n\n2ï¸âƒ£ Open all doors and trays.\n\n3ï¸âƒ£ Gently pull out any paper you see. Pull in the direction it normally feeds.\n\n4ï¸âƒ£ Check for small torn pieces - remove everything.\n\n5ï¸âƒ£ Close everything and turn the printer back on.\n\n6ï¸âƒ£ If it still says paper jam, there might be a small piece stuck inside - check again carefully.";
        }

        if (lower.includes("print") || lower.includes("printer") || lower.includes("scan")) {
          return "Printer problem?\n\n1ï¸âƒ£ Check: Is it on? Does it have paper and ink?\n\n2ï¸âƒ£ Check the cable or Wi-Fi connection.\n\n3ï¸âƒ£ Restart the printer and your computer.\n\n4ï¸âƒ£ Cancel all print jobs and try again.\n\n5ï¸âƒ£ Make sure it's set as your default printer.\n\n6ï¸âƒ£ Try printing a test page from the printer itself.";
        }

        if (lower.includes("screen frozen") || lower.includes("completely frozen") || lower.includes("won't respond")) {
          return "Screen completely frozen?\n\n1ï¸âƒ£ Wait 30 seconds - sometimes it's just thinking.\n\n2ï¸âƒ£ Try these keyboard shortcuts:\n   â€¢ Windows: Press Ctrl+Alt+Delete\n   â€¢ Mac: Press Command+Option+Escape\n\n3ï¸âƒ£ If that doesn't work, force restart:\n   â€¢ Desktop: Hold the power button for 10 seconds\n   â€¢ Laptop: Hold the power button for 10 seconds\n   â€¢ Phone: Hold power + volume down for 10 seconds\n\n4ï¸âƒ£ After it restarts, don't open everything at once.\n\n5ï¸âƒ£ If this happens often, you might have a virus - run a scan.";
        }

        if (lower.includes("mouse not moving") || lower.includes("cursor frozen") || lower.includes("mouse stuck")) {
          return "Mouse cursor not moving?\n\n1ï¸âƒ£ Try pressing Ctrl+Alt+Delete (Windows) or Command+Option+Escape (Mac).\n\n2ï¸âƒ£ Unplug your mouse and plug it back in.\n\n3ï¸âƒ£ Try a different USB port.\n\n4ï¸âƒ£ For wireless mouse, change the batteries.\n\n5ï¸âƒ£ Try using keyboard to navigate (Tab key to move, Enter to click).\n\n6ï¸âƒ£ If nothing works, hold the power button for 10 seconds to restart.";
        }

        if (lower.includes("frozen") || lower.includes("stuck") || lower.includes("unresponsive")) {
          return "Device frozen?\n\n1ï¸âƒ£ Wait 30 seconds first.\n\n2ï¸âƒ£ Try Ctrl+Alt+Delete (Windows) or Command+Option+Escape (Mac).\n\n3ï¸âƒ£ If that doesn't work, force restart by holding the power button for 10 seconds.\n\n4ï¸âƒ£ After restart, don't open all your programs at once.\n\n5ï¸âƒ£ If it freezes often, run a virus scan and free up storage space.";
        }

        if (lower.includes("forgot windows password") || lower.includes("can't log into windows")) {
          return "Forgot Windows password?\n\n1ï¸âƒ£ On the login screen, click 'I forgot my password'.\n\n2ï¸âƒ£ Follow the steps to reset using your Microsoft account.\n\n3ï¸âƒ£ If you don't have a Microsoft account, you'll need to:\n   â€¢ Use another admin account on the computer, OR\n   â€¢ Use a password reset disk if you made one, OR\n   â€¢ Reinstall Windows (you'll lose your files)\n\n4ï¸âƒ£ For work computers, contact your IT department.";
        }

        if (lower.includes("forgot mac password") || lower.includes("can't log into mac")) {
          return "Forgot Mac password?\n\n1ï¸âƒ£ On the login screen, enter any password 3 times.\n\n2ï¸âƒ£ You'll see 'Reset using Apple ID' - click it.\n\n3ï¸âƒ£ Enter your Apple ID and password.\n\n4ï¸âƒ£ Create a new password.\n\n5ï¸âƒ£ If that doesn't work:\n   â€¢ Restart and hold Command+R\n   â€¢ Click Utilities > Terminal\n   â€¢ Type: resetpassword\n   â€¢ Follow the instructions";
        }

        if (lower.includes("password") || lower.includes("forgot") || lower.includes("login") || lower.includes("sign in") || lower.includes("locked out")) {
          return "Password problem?\n\n1ï¸âƒ£ Click 'Forgot Password' on the login page.\n\n2ï¸âƒ£ Check your email or phone for a reset link or code.\n\n3ï¸âƒ£ Try passwords you commonly use.\n\n4ï¸âƒ£ Check if Caps Lock is on.\n\n5ï¸âƒ£ For work accounts, contact your IT department.\n\n6ï¸âƒ£ After you reset it, write it down somewhere safe.";
        }

        if (lower.includes("battery drains fast") || lower.includes("battery dies quickly") || lower.includes("battery doesn't last")) {
          return "Battery draining too fast?\n\n1ï¸âƒ£ Lower your screen brightness (this uses the most battery).\n\n2ï¸âƒ£ Turn on Battery Saver mode:\n   â€¢ iPhone: Settings > Battery > Low Power Mode\n   â€¢ Android: Settings > Battery > Battery Saver\n\n3ï¸âƒ£ Turn off Wi-Fi and Bluetooth when you're not using them.\n\n4ï¸âƒ£ Close apps you're not using.\n\n5ï¸âƒ£ Check which apps use the most battery (Settings > Battery) and close them.\n\n6ï¸âƒ£ If your phone is old (2+ years), the battery might be worn out and need replacing.";
        }

        if (lower.includes("won't charge") || lower.includes("not charging") || lower.includes("charging slow")) {
          return "Device won't charge?\n\n1ï¸âƒ£ Try a different charging cable.\n\n2ï¸âƒ£ Try a different power outlet.\n\n3ï¸âƒ£ Clean the charging port gently with a toothpick (turn device off first).\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Try charging from a wall outlet instead of computer USB.\n\n6ï¸âƒ£ If it charges very slowly, your cable or charger might be damaged.";
        }

        if (lower.includes("battery") || lower.includes("drain") || lower.includes("charge") || lower.includes("power")) {
          return "Battery problem?\n\n1ï¸âƒ£ Lower screen brightness.\n\n2ï¸âƒ£ Turn on Battery Saver or Low Power Mode.\n\n3ï¸âƒ£ Turn off Wi-Fi and Bluetooth when not using them.\n\n4ï¸âƒ£ Close apps you're not using.\n\n5ï¸âƒ£ Check Settings > Battery to see what's using power.\n\n6ï¸âƒ£ If battery is old (2+ years), it might need replacing.";
        }

        if (lower.includes("blue screen") || lower.includes("bsod") || lower.includes("stop error")) {
          return "Blue screen error?\n\n1ï¸âƒ£ Write down the error code if you see one.\n\n2ï¸âƒ£ Restart your computer - it might be a one-time thing.\n\n3ï¸âƒ£ Update Windows (Settings > Update & Security).\n\n4ï¸âƒ£ Update your drivers (especially graphics card).\n\n5ï¸âƒ£ Run a virus scan.\n\n6ï¸âƒ£ If it keeps happening, your computer might have a hardware problem - back up your files and take it to a repair shop.";
        }

        if (lower.includes("no sound") || lower.includes("can't hear") || lower.includes("audio not working")) {
          return "No sound coming out?\n\n1ï¸âƒ£ Check the volume - make sure it's not muted or at zero.\n\n2ï¸âƒ£ Check you're using the right output:\n   â€¢ Windows: Click speaker icon > Click arrow > Select your speakers/headphones\n   â€¢ Mac: System Preferences > Sound > Output > Select your device\n\n3ï¸âƒ£ Unplug headphones and plug them back in.\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Try different headphones or speakers to see if yours are broken.\n\n6ï¸âƒ£ Update your audio drivers (Windows: Device Manager > Sound controllers).";
        }

        if (lower.includes("sound crackling") || lower.includes("audio crackling") || lower.includes("static")) {
          return "Sound crackling or static?\n\n1ï¸âƒ£ Unplug your headphones/speakers and plug them back in.\n\n2ï¸âƒ£ Try a different audio jack or USB port.\n\n3ï¸âƒ£ Lower the volume - sometimes too loud causes crackling.\n\n4ï¸âƒ£ Update your audio drivers (Device Manager > Sound controllers).\n\n5ï¸âƒ£ Try different headphones to see if yours are damaged.\n\n6ï¸âƒ£ Close other programs - too many can cause audio issues.";
        }

        if (lower.includes("sound") || lower.includes("audio") || lower.includes("speaker") || lower.includes("volume") || lower.includes("hear")) {
          return "Sound problem?\n\n1ï¸âƒ£ Check volume is up and not muted.\n\n2ï¸âƒ£ Make sure the right speakers/headphones are selected.\n\n3ï¸âƒ£ Unplug and replug your headphones.\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Try different headphones to test.\n\n6ï¸âƒ£ Update your audio drivers.";
        }

        if (lower.includes("camera black screen") || lower.includes("webcam black") || lower.includes("camera shows black")) {
          return "Camera showing black screen?\n\n1ï¸âƒ£ Check if there's a cover or sticker over the camera.\n\n2ï¸âƒ£ Close all apps that might use the camera (Zoom, Teams, Skype).\n\n3ï¸âƒ£ Restart your device.\n\n4ï¸âƒ£ Give the app permission to use camera:\n   â€¢ Windows: Settings > Privacy > Camera > Allow apps\n   â€¢ Mac: System Preferences > Security & Privacy > Camera > Check the app\n\n5ï¸âƒ£ Update the app you're trying to use.\n\n6ï¸âƒ£ Try the camera in a different app to see if it works.";
        }

        if (lower.includes("camera not working in zoom") || lower.includes("camera not working in teams")) {
          return "Camera not working in Zoom/Teams?\n\n1ï¸âƒ£ In the app, click Settings > Video > Select your camera from the dropdown.\n\n2ï¸âƒ£ Close the app completely and reopen it.\n\n3ï¸âƒ£ Give the app camera permission:\n   â€¢ Windows: Settings > Privacy > Camera\n   â€¢ Mac: System Preferences > Security & Privacy > Camera\n\n4ï¸âƒ£ Close other apps that might be using the camera.\n\n5ï¸âƒ£ Restart your computer.\n\n6ï¸âƒ£ Update the app to the latest version.";
        }

        if (lower.includes("camera") || lower.includes("webcam") || lower.includes("video")) {
          return "Camera not working?\n\n1ï¸âƒ£ Check if there's a cover over the camera.\n\n2ï¿½ï¿½ï¿½ï¿½ï¿½ Close other apps using the camera.\n\n3ï¸âƒ£ Give the app permission (Settings > Privacy > Camera).\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Update the app.\n\n6ï¸âƒ£ Try the camera in a different app to test it.";
        }

        if (lower.includes("bluetooth won't pair") || lower.includes("can't pair bluetooth") || lower.includes("bluetooth pairing failed")) {
          return "Bluetooth won't pair?\n\n1ï¸âƒ£ Put your device in pairing mode (usually hold the power button until it flashes).\n\n2ï¸âƒ£ On your phone/computer, turn Bluetooth off and back on.\n\n3ï¸âƒ£ Forget the device and try pairing again:\n   â€¢ Find it in Bluetooth settings\n   â€¢ Click 'Forget' or 'Remove'\n   â€¢ Search for it again\n\n4ï¸âƒ£ Move the devices closer together (within 3 feet).\n\n5ï¸âƒ£ Charge your Bluetooth device - low battery causes problems.\n\n6ï¸âƒ£ Restart both devices.";
        }

        if (lower.includes("bluetooth keeps disconnecting") || lower.includes("bluetooth drops")) {
          return "Bluetooth keeps disconnecting?\n\n1ï¸âƒ£ Move closer - walls and distance cause disconnections.\n\n2ï¸âƒ£ Charge your Bluetooth device.\n\n3ï¸âƒ£ Turn off other Bluetooth devices nearby - they can interfere.\n\n4ï¸âƒ£ Forget the device and pair it again.\n\n5ï¸âƒ£ Update your phone/computer's software.\n\n6ï¸âƒ£ Turn off Wi-Fi temporarily to see if it helps (Wi-Fi can interfere with Bluetooth).";
        }

        if (lower.includes("bluetooth") || lower.includes("pairing") || lower.includes("wireless headphones") || lower.includes("airpods")) {
          return "Bluetooth problem?\n\n1ï¸âƒ£ Turn Bluetooth off and back on.\n\n2ï¸âƒ£ Put your device in pairing mode (hold power button until it flashes).\n\n3ï¸âƒ£ Move devices closer together.\n\n4ï¸âƒ£ Forget the device and pair again.\n\n5ï¸âƒ£ Charge your Bluetooth device.\n\n6ï¸âƒ£ Restart both devices.";
        }

        if (lower.includes("keyboard keys not working") || lower.includes("some keys don't work")) {
          return "Some keyboard keys not working?\n\n1ï¸âƒ£ Restart your computer.\n\n2ï¸âƒ£ Clean under the keys - dust and crumbs cause problems. Use compressed air.\n\n3ï¸âƒ£ Check if Num Lock or Function Lock is on (might change what keys do).\n\n4ï¸âƒ£ Try the keyboard on another computer to see if it's broken.\n\n5ï¸âƒ£ For laptops, try an external USB keyboard to see if the built-in one is damaged.\n\n6ï¸âƒ£ Update keyboard drivers (Device Manager > Keyboards).";
        }

        if (lower.includes("mouse not working") || lower.includes("mouse won't move")) {
          return "Mouse not working?\n\n1ï¸âƒ£ Check the cable is plugged in (or batteries for wireless).\n\n2ï¸âƒ£ Try a different USB port.\n\n3ï¸âƒ£ For wireless mouse, make sure the USB receiver is plugged in.\n\n4ï¸âƒ£ Clean the bottom of the mouse - dust blocks the sensor.\n\n5ï¸âƒ£ Try the mouse on a different surface (not glass or shiny).\n\n6ï¸âƒ£ Restart your computer.\n\n7ï¸âƒ£ Try a different mouse to see if yours is broken.";
        }

        if (lower.includes("typing wrong letters") || lower.includes("keyboard typing wrong")) {
          return "Keyboard typing wrong letters?\n\n1ï¸âƒ£ Check if you accidentally changed the keyboard language:\n   â€¢ Windows: Look at bottom right corner, click language, select English\n   â€¢ Mac: Top right corner, click flag icon, select English\n\n2ï¸âƒ£ Turn off Num Lock (might make some keys type numbers).\n\n3ï¸âƒ£ Restart your computer.\n\n4ï¸âƒ£ Check keyboard settings to make sure it's set to your language.";
        }

        if (lower.includes("keyboard") || lower.includes("mouse") || lower.includes("trackpad") || lower.includes("typing") || lower.includes("cursor")) {
          return "Keyboard or mouse problem?\n\n1ï¸âƒ£ Check cables are plugged in (or batteries for wireless).\n\n2ï¸âƒ£ Try a different USB port.\n\n3ï¸âƒ£ Restart your computer.\n\n4ï¸âƒ£ Clean the device - dust causes problems.\n\n5ï¸âƒ£ Update drivers (Device Manager > Keyboards/Mice).\n\n6ï¸âƒ£ Try a different keyboard/mouse to test.";
        }

        if (lower.includes("storage full") || lower.includes("disk full") || lower.includes("no space left")) {
          return "Storage full? Here's how to free up space:\n\n1ï¸âƒ£ Empty your Recycle Bin/Trash.\n\n2ï¸âƒ£ Delete old downloads (Downloads folder).\n\n3ï¸âƒ£ Delete programs you don't use:\n   â€¢ Windows: Settings > Apps > Uninstall\n   â€¢ Mac: Open Applications folder, drag apps to Trash\n\n4ï¸âƒ£ Clear browser cache (Ctrl+Shift+Delete).\n\n5ï¸âƒ£ Move photos and videos to Google Photos or iCloud.\n\n6ï¸âƒ£ Use Disk Cleanup:\n   â€¢ Windows: Search 'Disk Cleanup', run it\n   â€¢ Mac: About This Mac > Storage > Manage";
        }

        if (lower.includes("what's taking up space") || lower.includes("find large files")) {
          return "Want to see what's using your storage?\n\n1ï¸âƒ£ Windows: Settings > System > Storage > Click your drive > See what's using space\n\n2ï¸âƒ£ Mac: Apple menu > About This Mac > Storage > Manage\n\n3ï¸âƒ£ Look for:\n   â€¢ Old downloads\n   â€¢ Videos (these are huge)\n   â€¢ Programs you don't use\n   â€¢ Duplicate files\n\n4ï¸âƒ£ Delete what you don't need.\n\n5ï¸âƒ£ Move important files to an external drive or cloud storage.";
        }

        if (lower.includes("storage") || lower.includes("disk") || lower.includes("space") || lower.includes("full") || lower.includes("memory")) {
          return "Need more storage space?\n\n1ï¸âƒ£ Empty Recycle Bin/Trash.\n\n2ï¸âƒ£ Delete old downloads and files.\n\n3ï¸âƒ£ Uninstall programs you don't use.\n\n4ï¸âƒ£ Clear browser cache.\n\n5ï¸âƒ£ Move photos/videos to cloud storage.\n\n6ï¸âƒ£ Run Disk Cleanup (Windows) or Manage Storage (Mac).";
        }

        if (lower.includes("can't install") || lower.includes("won't install") || lower.includes("installation failed")) {
          return "Can't install software?\n\n1ï¸âƒ£ Right-click the installer and choose 'Run as administrator'.\n\n2ï¸âƒ£ Turn off your antivirus temporarily (it might be blocking it).\n\n3ï¸âƒ£ Make sure you have enough free space (at least 10GB).\n\n4ï¸âƒ£ Download the installer again - it might be corrupted.\n\n5ï¸âƒ£ Restart your computer and try again.\n\n6ï¸âƒ£ Check if your computer meets the requirements (look on the software's website).";
        }

        if (lower.includes("windows update won't install") || lower.includes("update failed")) {
          return "Windows Update not working?\n\n1ï¸âƒ£ Restart your computer and try again.\n\n2ï¸âƒ£ Free up storage space (need at least 10GB).\n\n3ï¸âƒ£ Run Windows Update Troubleshooter:\n   â€¢ Settings > Update & Security > Troubleshoot > Windows Update\n\n4ï¸âƒ£ Disconnect external drives and try again.\n\n5ï¸âƒ£ If it keeps failing, search the error code on Google for specific help.";
        }

        if (lower.includes("install") || lower.includes("update") || lower.includes("download") || lower.includes("setup")) {
          return "Installation problem?\n\n1ï¸âƒ£ Run as administrator (right-click > Run as administrator).\n\n2ï¸âƒ£ Turn off antivirus temporarily.\n\n3ï¸âƒ£ Make sure you have enough storage space.\n\n4ï¸âƒ£ Download the file again.\n\n5ï¸âƒ£ Restart and try again.\n\n6ï¸âƒ£ Check if your computer meets the requirements.";
        }

        return "I can help! To give you the best solution, tell me:\n\n1ï¸âƒ£ What exactly is happening? (Error message? Nothing happens? Something else?)\n\n2ï¸âƒ£ What device are you using? (Windows PC, Mac, iPhone, Android, etc.)\n\n3ï¸âƒ£ When did this start?\n\n4ï¸âƒ£ What have you tried already?\n\nOr click one of the buttons above for common problems!";
      }

      function handleUserSubmit(text) {
        if (!text || !text.trim()) {
          showError("Please describe your tech issue so I can help.");
          return;
        }
        const cleaned = text.trim();
        addMessage("user", cleaned);
        setSending(true);

        setTimeout(() => {
          const reply = generateAssistantReply(cleaned);
          addMessage("assistant", reply);
          setSending(false);
        }, 800);
      }

      if (inputForm) {
        inputForm.addEventListener("submit", function (event) {
          event.preventDefault();
          handleUserSubmit(inputField.value);
          inputField.value = "";
          inputField.style.height = "auto";
        });
      }

      if (inputField) {
        inputField.addEventListener("input", function () {
          this.style.height = "auto";
          this.style.height = this.scrollHeight + "px";
        });
      }

      document.addEventListener("click", function (e) {
        const btn = e.target.closest(".category-btn");
        if (!btn) return;
        const prompt = btn.getAttribute("data-prompt");
        if (!prompt) return;
        if (inputField) {
          inputField.value = prompt;
          inputField.style.height = "auto";
          inputField.style.height = inputField.scrollHeight + "px";
          inputField.focus();
        }
      });

      if (backBtn) {
        backBtn.addEventListener("click", function() {
          const messages = chatContainer.querySelectorAll('[data-role]');
          messages.forEach((msg, index) => {
            if (index > 0) {
              msg.remove();
            }
          });
          
          if (welcomeBlock) {
            welcomeBlock.classList.remove("hidden");
          }
          
          backBtn.classList.add("hidden");
          backBtn.classList.remove("flex");
          
          if (inputField) {
            inputField.value = "";
            inputField.style.height = "auto";
          }
          
          chatContainer.scrollTop = 0;
        });
      }

      const defaultConfig = {
        main_title: "Tech Support Assistant",
        welcome_title: "Hi, I'm your tech assistant ğŸ”§",
        welcome_body:
          "Describe what's going wrong with your computer, phone, or apps, and I'll walk you through simple, stepâ€‘byâ€‘step fixes.",
        placeholder_text: "Ask a question about your device, app, or setup...",
        primary_button_text: "Send",
        footer_text:
          "Responses are suggestions only. For sensitive systems, confirm steps with your IT team first.",
        background_color: "#1a1a2e",
        surface_color: "#0f3460",
        text_color: "#ffffff",
        primary_action_color: "#e94560",
        secondary_action_color: "#533483",
        font_family: "system-ui",
        font_size: 14
      };

      async function onConfigChange(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});

        const root = document.body;
        if (root) {
          root.style.backgroundColor = cfg.background_color;
        }

        const container = document.querySelector("div.h-full.flex.flex-col");
        if (container) {
          container.style.backgroundColor = cfg.background_color;
        }

        const headers = document.querySelectorAll("header");
        headers.forEach((el) => {
          el.style.backgroundColor = cfg.surface_color;
          el.style.borderBottomColor = cfg.primary_action_color;
        });

        const footerSection = document.querySelector(
          "section[aria-label='Ask a tech support question']"
        );
        if (footerSection) {
          footerSection.style.backgroundColor = cfg.surface_color;
          footerSection.style.borderTopColor = cfg.secondary_action_color;
        }

        const textEls = document.querySelectorAll("body, p, span, label, h1, h2, button");
        textEls.forEach((el) => {
          el.style.color = cfg.text_color;
        });

        if (sendBtn) {
          sendBtn.style.backgroundColor = cfg.primary_action_color;
        }

        if (backBtn) {
          backBtn.style.backgroundColor = cfg.secondary_action_color;
        }

        const categoryButtons = document.querySelectorAll(".category-btn");
        categoryButtons.forEach((btn) => {
          btn.style.backgroundColor = cfg.secondary_action_color;
        });
        const assistantAvatars = document.querySelectorAll(
          ".message-avatar.bg-\\[\\#533483\\]"
        );
        assistantAvatars.forEach((el) => {
          el.style.backgroundColor = cfg.secondary_action_color;
        });

        const style = document.createElement('style');
        style.textContent = `
          .cc-scroll::-webkit-scrollbar-track {
            background: ${cfg.surface_color} !important;
          }
          .cc-scroll::-webkit-scrollbar-thumb {
            background-color: ${cfg.secondary_action_color} !important;
            border-color: ${cfg.surface_color} !important;
          }
          .cc-scroll {
            scrollbar-color: ${cfg.secondary_action_color} ${cfg.surface_color} !important;
          }
        `;
        document.head.appendChild(style);

        if (mainTitleEl) {
          mainTitleEl.textContent = cfg.main_title || defaultConfig.main_title;
        }
        if (welcomeTitleEl) {
          welcomeTitleEl.textContent =
            cfg.welcome_title || defaultConfig.welcome_title;
        }
        if (welcomeBodyEl) {
          welcomeBodyEl.textContent =
            cfg.welcome_body || defaultConfig.welcome_body;
        }
        if (inputField) {
          inputField.placeholder =
            cfg.placeholder_text || defaultConfig.placeholder_text;
        }
        if (sendText) {
          sendText.textContent =
            cfg.primary_button_text || defaultConfig.primary_button_text;
        }
        if (footerTextEl) {
          footerTextEl.textContent =
            cfg.footer_text || defaultConfig.footer_text;
        }

        const baseFont =
          (cfg.font_family && cfg.font_family.trim()) || defaultConfig.font_family;
        const baseSize = Number.isFinite(cfg.font_size)
          ? cfg.font_size
          : defaultConfig.font_size;
        const fontStack = baseFont + ", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif";

        document.documentElement.style.fontFamily = fontStack;

        if (mainTitleEl) {
          mainTitleEl.style.fontSize = baseSize * 1.7 + "px";
        }
        if (welcomeTitleEl) {
          welcomeTitleEl.style.fontSize = baseSize * 1.5 + "px";
        }
        if (welcomeBodyEl) {
          welcomeBodyEl.style.fontSize = baseSize * 1.0 + "px";
        }
        if (inputField) {
          inputField.style.fontSize = baseSize * 0.95 + "px";
        }
        const labels = document.querySelectorAll("label");
        labels.forEach((el) => {
          el.style.fontSize = baseSize * 0.85 + "px";
        });
        const smallTexts = document.querySelectorAll(
          "#cc-footer-text, .message-time"
        );
        smallTexts.forEach((el) => {
          el.style.fontSize = baseSize * 0.8 + "px";
        });
      }

      function mapToCapabilities(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});

        const recolorables = [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => {
              cfg.background_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_color: value });
              }
            }
          },
          {
            get: () => cfg.surface_color || defaultConfig.surface_color,
            set: (value) => {
              cfg.surface_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ surface_color: value });
              }
            }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => {
              cfg.text_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          },
          {
            get: () =>
              cfg.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              cfg.primary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            }
          },
          {
            get: () =>
              cfg.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              cfg.secondary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          }
        ];

        const fontEditable = {
          get: () => cfg.font_family || defaultConfig.font_family,
          set: (value) => {
            cfg.font_family = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_family: value });
            }
          }
        };

        const fontSizeable = {
          get: () => cfg.font_size || defaultConfig.font_size,
          set: (value) => {
            cfg.font_size = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        };

        return {
          recolorables,
          borderables: [],
          fontEditable,
          fontSizeable
        };
      }

      function mapToEditPanelValues(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});
        return new Map([
          ["main_title", cfg.main_title],
          ["welcome_title", cfg.welcome_title],
          ["welcome_body", cfg.welcome_body],
          ["placeholder_text", cfg.placeholder_text],
          ["primary_button_text", cfg.primary_button_text],
          ["footer_text", cfg.footer_text]
        ]);
      }

      if (window.elementSdk && typeof window.elementSdk.init === "function") {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      } else {
        onConfigChange(defaultConfig);
      }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a113a01b4236cda',t:'MTc2MzU3MTIzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
