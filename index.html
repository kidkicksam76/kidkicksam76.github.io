<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>Tech Support Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- SDKs -->
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script><!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
      body {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
      }
      * {
        box-sizing: border-box;
      }
      /* Custom scrollbar for chat */
      .cc-scroll::-webkit-scrollbar {
        width: 6px;
      }
      .cc-scroll::-webkit-scrollbar-track {
        background: transparent;
      }
      .cc-scroll::-webkit-scrollbar-thumb {
        background-color: rgba(255, 255, 255, 0.2);
        border-radius: 999px;
      }

      @keyframes cc-slide-in {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .cc-message-anim {
        animation: cc-slide-in 0.25s ease-out;
      }

      /* Focus ring for accessibility */
      .cc-focus-visible:focus-visible {
        outline: 2px solid #e94560;
        outline-offset: 2px;
      }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div class="h-full flex flex-col bg-[#1a1a2e]">
   <header class="flex-shrink-0 border-b-2 border-[#e94560] bg-[#0f3460] text-[#e94560]" role="banner">
    <div class="max-w-5xl mx-auto px-6 py-4 flex items-center justify-between gap-4">
     <div class="flex items-center gap-3"><button id="cc-back-btn" type="button" class="cc-focus-visible hidden items-center justify-center h-9 w-9 rounded-full bg-[#533483] hover:bg-[#6d44a8] text-white transition" aria-label="Go back to welcome screen"> â† </button>
      <h1 id="cc-main-title" class="text-xl font-semibold">Tech Support Assistant</h1>
     </div>
     <div class="inline-flex items-center gap-2 text-xs text-white/80 bg-[#16213e] px-3 py-1.5 rounded-full"><span class="inline-flex h-2 w-2 rounded-full bg-[#22c55e]" aria-hidden="true"></span> <span>Online helper</span>
     </div>
    </div>
   </header>
   <main class="flex-1 min-h-0 flex flex-col" role="main">
    <section aria-label="Chat conversation" class="flex-1 min-h-0 overflow-hidden">
     <div id="cc-chat-container" class="cc-scroll max-w-5xl mx-auto px-6 py-6 flex flex-col gap-4 overflow-y-auto"><!-- Welcome block (hidden after first real message) -->
      <article id="cc-welcome" class="text-center text-white max-w-xl mx-auto mt-6 bg-[#16213e]/70 rounded-2xl px-6 py-8 shadow-lg">
       <h2 id="cc-welcome-title" class="text-2xl font-semibold text-[#e94560] mb-2">Hi, I'm your tech assistant ğŸ”§</h2>
       <p id="cc-welcome-body" class="text-sm text-white/80 mb-4 leading-relaxed">Describe what's going wrong with your computer, phone, or apps, and I'll walk you through simple, stepâ€‘byâ€‘step fixes.</p>
       <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 text-left text-xs" aria-label="Quick help categories"><button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My Wiâ€‘Fi or internet connection isn't working"> ğŸ›œ Wiâ€‘Fi &amp; Internet </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My computer is running very slowly"> ğŸ–¥ï¸ Slow Computer </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I have issues with my email not sending or receiving"> ğŸ“§ Email Issues </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My software or app keeps crashing or freezing"> âš™ï¸ Apps Crashing </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I can't print from my computer"> ğŸ–¨ï¸ Printer Problems </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My screen is frozen or not responding"> ğŸ”’ Frozen Screen </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I forgot my password"> ğŸ”‘ Password Reset </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My battery drains too quickly"> ğŸ”‹ Battery Drain </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I'm getting a blue screen error"> ğŸ’™ Blue Screen </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My audio or sound isn't working"> ğŸ”Š No Sound </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My webcam or camera isn't working"> ğŸ“· Camera Issues </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I can't connect my Bluetooth device"> ğŸ“¡ Bluetooth </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My keyboard or mouse isn't working"> âŒ¨ï¸ Keyboard/Mouse </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="My storage is full"> ğŸ’¾ Storage Full </button> <button type="button" class="category-btn cc-focus-visible w-full bg-[#533483] hover:bg-[#6d44a8] text-white font-medium px-3 py-3 rounded-xl text-left transition transform hover:-translate-y-0.5" data-prompt="I can't install or update software"> ğŸ“¦ Install Issues </button>
       </div>
      </article><!-- Initial assistant message -->
      <div class="flex items-start gap-3 max-w-xl cc-message-anim" data-role="assistant-message">
       <div class="message-avatar flex items-center justify-center h-9 w-9 rounded-full bg-[#533483] text-white text-lg flex-shrink-0" aria-hidden="true">
        ğŸ¤–
       </div>
       <div class="flex-1">
        <div class="message-content bg-[#0f3460] text-white rounded-2xl rounded-bl-sm px-4 py-3 text-sm leading-relaxed">
         <p>I'm here to help you troubleshoot devices and apps. Tell me the issue in your own words, and I'll suggest clear steps you can follow.</p>
        </div>
        <p class="message-time text-[11px] text-white/60 mt-1">Assistant Â· just now</p>
       </div>
      </div>
     </div>
    </section>
    <section aria-label="Ask a tech support question" class="flex-shrink-0 border-t-2 border-[#533483] bg-[#0f3460]">
     <div class="max-w-5xl mx-auto px-6 py-4 space-y-2">
      <form id="cc-input-form" class="w-full" novalidate>
       <div class="flex items-end gap-3">
        <div class="flex-1"><label for="cc-input" class="block text-xs font-medium text-white/70 mb-1">Type your tech question</label>
         <div class="flex items-center gap-2 bg-[#1a1a2e] border-2 border-[#533483] rounded-full px-4 py-2.5 focus-within:border-[#e94560] transition"><textarea id="cc-input" rows="1" class="input-field block w-full bg-transparent border-none outline-none text-sm text-white placeholder:text-white/40 resize-none" placeholder="Ask a question about your device, app, or setup..."></textarea>
         </div>
        </div><button id="cc-send-btn" type="submit" class="cc-focus-visible inline-flex items-center justify-center bg-[#e94560] hover:bg-[#f25b72] text-white font-semibold text-sm px-5 py-2.5 rounded-full whitespace-nowrap transition disabled:opacity-60 disabled:cursor-not-allowed"> <span id="cc-send-text">Send</span> <span id="cc-send-spinner" class="hidden ml-2 h-4 w-4 border-2 border-white/40 border-t-white rounded-full animate-spin" aria-hidden="true"></span> </button>
       </div>
      </form>
      <p id="cc-footer-text" class="text-[11px] text-white/50 text-left">Responses are suggestions only. For sensitive systems, confirm steps with your IT team first.</p>
      <p id="cc-error" class="hidden text-xs text-[#fed7d7] bg-[#7f1d1d]/60 border border-[#fecaca] rounded-md px-3 py-1.5"></p>
     </div>
    </section>
   </main>
  </div>
  <script>
      // --- Comprehensive tech support knowledge base ---

      const chatContainer = document.getElementById("cc-chat-container");
      const inputForm = document.getElementById("cc-input-form");
      const inputField = document.getElementById("cc-input");
      const sendBtn = document.getElementById("cc-send-btn");
      const sendText = document.getElementById("cc-send-text");
      const sendSpinner = document.getElementById("cc-send-spinner");
      const errorBox = document.getElementById("cc-error");
      const welcomeBlock = document.getElementById("cc-welcome");
      const backBtn = document.getElementById("cc-back-btn");

      const welcomeTitleEl = document.getElementById("cc-welcome-title");
      const welcomeBodyEl = document.getElementById("cc-welcome-body");
      const mainTitleEl = document.getElementById("cc-main-title");
      const footerTextEl = document.getElementById("cc-footer-text");

      function showError(message) {
        if (!errorBox) return;
        errorBox.textContent = message;
        errorBox.classList.remove("hidden");
        setTimeout(() => {
          errorBox.classList.add("hidden");
        }, 3000);
      }

      function setSending(isSending) {
        if (!sendBtn) return;
        sendBtn.disabled = isSending;
        if (isSending) {
          sendSpinner.classList.remove("hidden");
        } else {
          sendSpinner.classList.add("hidden");
        }
      }

      function addMessage(role, text) {
        if (!chatContainer) return;

        if (welcomeBlock && !welcomeBlock.classList.contains("hidden")) {
          welcomeBlock.classList.add("hidden");
          if (backBtn) {
            backBtn.classList.remove("hidden");
            backBtn.classList.add("flex");
          }
        }

        const wrapper = document.createElement("div");
        wrapper.className =
          "flex items-start gap-3 max-w-xl cc-message-anim " +
          (role === "user" ? "ml-auto flex-row-reverse" : "");
        wrapper.setAttribute("data-role", role + "-message");

        const avatar = document.createElement("div");
        avatar.className =
          "message-avatar flex items-center justify-center h-9 w-9 rounded-full text-white text-lg flex-shrink-0 " +
          (role === "user" ? "bg-[#e94560]" : "bg-[#533483]");
        avatar.textContent = role === "user" ? "ğŸ‘¤" : "ğŸ¤–";

        const body = document.createElement("div");
        body.className = "flex-1";

        const bubble = document.createElement("div");
        bubble.className =
          "message-content text-white rounded-2xl px-4 py-3 text-sm leading-relaxed " +
          (role === "user"
            ? "bg-[#e94560] rounded-br-sm"
            : "bg-[#0f3460] rounded-bl-sm");
        
        // Format text with line breaks
        const lines = text.split('\n');
        lines.forEach((line, index) => {
          if (line.trim()) {
            const p = document.createElement('p');
            p.textContent = line;
            if (index > 0) p.className = 'mt-2';
            bubble.appendChild(p);
          }
        });

        const time = document.createElement("p");
        time.className = "message-time text-[11px] text-white/60 mt-1";
        const timestamp = new Date();
        const minutes = timestamp.getMinutes().toString().padStart(2, "0");
        const hours = timestamp.getHours().toString().padStart(2, "0");
        time.textContent =
          (role === "user" ? "You" : "Assistant") + " Â· " + hours + ":" + minutes;

        body.appendChild(bubble);
        body.appendChild(time);
        wrapper.appendChild(avatar);
        wrapper.appendChild(body);

        chatContainer.appendChild(wrapper);
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }

      function generateAssistantReply(message) {
        const lower = message.toLowerCase();

        // Wi-Fi / Internet Issues
        if (lower.includes("wifi") || lower.includes("wi-fi") || lower.includes("internet") || lower.includes("connection") || lower.includes("network")) {
          return "Let's troubleshoot your internet connection step-by-step:\n\n1ï¸âƒ£ Check other devices â€“ are they also offline? If yes, the issue is likely your router or ISP.\n\n2ï¸âƒ£ Restart your router/modem â€“ unplug it for 30 seconds, plug it back in, and wait 2-3 minutes for it to fully restart.\n\n3ï¸âƒ£ On your device, turn Wiâ€‘Fi off and on again, or toggle Airplane mode on/off.\n\n4ï¸âƒ£ Forget the Wiâ€‘Fi network in settings and reconnect by entering the password again.\n\n5ï¸âƒ£ Move closer to the router to rule out signal strength issues.\n\n6ï¸âƒ£ Check if your device's network adapter is enabled in settings.\n\n7ï¸âƒ£ Update your network drivers (Windows) or reset network settings (mobile devices).\n\n8ï¸âƒ£ If only one app fails, try a different browser or app to isolate the issue.\n\n9ï¸âƒ£ Contact your ISP if all devices are affected and router restart didn't help.";
        }

        // Slow Computer / Performance
        if (lower.includes("slow") || lower.includes("lag") || lower.includes("performance") || lower.includes("freeze") || lower.includes("sluggish")) {
          return "A slow computer is usually caused by too many apps, limited storage, or background processes. Try this:\n\n1ï¸âƒ£ Close unused apps and browser tabs â€“ each one uses memory.\n\n2ï¸âƒ£ Restart your computer if you haven't recently â€“ this clears temporary files and memory.\n\n3ï¸âƒ£ Check free storage space (need at least 10-15% free). Delete large unused files, old downloads, or uninstall unused programs.\n\n4ï¸âƒ£ Disable startup programs that launch automatically (Task Manager > Startup on Windows, System Preferences > Users & Groups > Login Items on Mac).\n\n5ï¸âƒ£ Run Disk Cleanup (Windows) or optimize storage (Mac).\n\n6ï¸âƒ£ Check for malware using Windows Defender or your antivirus software.\n\n7ï¸âƒ£ Update your operating system and drivers.\n\n8ï¸âƒ£ Upgrade RAM if your computer has 4GB or less (especially for multitasking).\n\n9ï¸âƒ£ Consider an SSD upgrade if you're still using a traditional hard drive.";
        }

        // Email Issues
        if (lower.includes("email") || lower.includes("outlook") || lower.includes("gmail") || lower.includes("mail") || lower.includes("send") || lower.includes("receive")) {
          return "Let's fix your email problem:\n\n1ï¸âƒ£ Confirm you're connected to the internet â€“ try loading a website.\n\n2ï¸âƒ£ Check your Outbox or Drafts folder for stuck messages.\n\n3ï¸âƒ£ Verify your device's date and time are correct (incorrect time causes authentication failures).\n\n4ï¸âƒ£ Sign out of your email app completely and sign back in.\n\n5ï¸âƒ£ If you recently changed your password, update it in your email app settings.\n\n6ï¸âƒ£ Check your email storage quota â€“ full mailboxes can't receive new messages.\n\n7ï¸âƒ£ Verify your email server settings (IMAP/SMTP) are correct.\n\n8ï¸âƒ£ Disable VPN temporarily if you're using one.\n\n9ï¸âƒ£ Check your spam/junk folder â€“ messages might be filtered there.\n\nğŸ”Ÿ Try accessing email through a web browser to see if it's an app-specific issue.\n\n1ï¸âƒ£1ï¸âƒ£ Clear the email app cache (mobile) or reinstall the app.";
        }

        // App Crashes / Freezing
        if (lower.includes("crash") || lower.includes("freeze") || lower.includes("not responding") || lower.includes("stopped working") || lower.includes("hang")) {
          return "When an app keeps crashing or freezing, try this sequence:\n\n1ï¸âƒ£ Force close the app completely (don't just minimize) and reopen it.\n\n2ï¸âƒ£ Restart your device to clear temporary issues and free up memory.\n\n3ï¸âƒ£ Check for app updates in your app store or software updater.\n\n4ï¸âƒ£ Clear the app's cache and temporary files (Settings > Apps > [App Name] > Clear Cache).\n\n5ï¸âƒ£ Check if your operating system needs updates.\n\n6ï¸âƒ£ Free up storage space â€“ apps need room to operate.\n\n7ï¸âƒ£ Check if other apps are also crashing (might indicate a system issue).\n\n8ï¸âƒ£ Uninstall and reinstall the app (backup important data first).\n\n9ï¸âƒ£ Check the app's system requirements â€“ your device might not meet them.\n\nğŸ”Ÿ Disable any third-party plugins or extensions that might conflict.\n\n1ï¸âƒ£1ï¸âƒ£ Run the app in compatibility mode (Windows) if it's an older program.";
        }

        // Printer Problems
        if (lower.includes("print") || lower.includes("printer") || lower.includes("scan")) {
          return "Let's get your printer working:\n\n1ï¸âƒ£ Check basics â€“ is the printer powered on, has paper, and ink/toner?\n\n2ï¸âƒ£ Check the connection â€“ USB cable secure or Wi-Fi connected?\n\n3ï¸âƒ£ Restart both your computer and printer.\n\n4ï¸âƒ£ Set your printer as the default printer in system settings.\n\n5ï¸âƒ£ Clear the print queue â€“ cancel all pending jobs and try again.\n\n6ï¸âƒ£ Update or reinstall printer drivers from the manufacturer's website.\n\n7ï¸âƒ£ Run the printer troubleshooter (Windows: Settings > Update & Security > Troubleshoot).\n\n8ï¸âƒ£ Check for paper jams inside the printer.\n\n9ï¸âƒ£ For network printers, verify the IP address hasn't changed.\n\nğŸ”Ÿ Try printing a test page directly from the printer (without computer).\n\n1ï¸âƒ£1ï¸âƒ£ Disable VPN if you're using one â€“ it can block printer communication.\n\n1ï¸âƒ£2ï¸âƒ£ Check firewall settings aren't blocking the printer.";
        }

        // Frozen Screen
        if (lower.includes("frozen") || lower.includes("stuck") || lower.includes("unresponsive") || lower.includes("won't respond")) {
          return "When your screen is frozen:\n\n1ï¸âƒ£ Wait 30-60 seconds â€“ sometimes the system is just processing.\n\n2ï¸âƒ£ Try keyboard shortcuts:\n   â€¢ Windows: Ctrl+Alt+Delete, then Task Manager\n   â€¢ Mac: Command+Option+Escape to force quit apps\n\n3ï¸âƒ£ If mouse works, try closing the frozen app via Task Manager.\n\n4ï¸âƒ£ If completely frozen, force restart:\n   â€¢ Desktop: Hold power button 5-10 seconds\n   â€¢ Laptop: Hold power button 5-10 seconds\n   â€¢ Phone/Tablet: Hold power + volume down for 10 seconds\n\n5ï¸âƒ£ After restart, don't reopen all apps at once.\n\n6ï¸âƒ£ Check for system updates after restarting.\n\n7ï¸âƒ£ Run a disk check (Windows: chkdsk) or First Aid (Mac: Disk Utility).\n\n8ï¸âƒ£ If it happens frequently, check for overheating or hardware issues.\n\n9ï¸âƒ£ Scan for malware that might be consuming resources.";
        }

        // Password Reset
        if (lower.includes("password") || lower.includes("forgot") || lower.includes("login") || lower.includes("sign in") || lower.includes("locked out")) {
          return "Let's help you regain access:\n\n1ï¸âƒ£ Use the 'Forgot Password' or 'Reset Password' link on the login page.\n\n2ï¸âƒ£ Check your email (including spam folder) for the reset link.\n\n3ï¸âƒ£ Try alternate email addresses or phone numbers associated with the account.\n\n4ï¸âƒ£ Answer security questions if prompted.\n\n5ï¸âƒ£ For Windows login: Use another admin account or password reset disk if you created one.\n\n6ï¸âƒ£ For Mac login: Use your Apple ID to reset the password in Recovery Mode.\n\n7ï¸âƒ£ For work accounts: Contact your IT department or help desk.\n\n8ï¸âƒ£ Check if you saved the password in your browser's password manager.\n\n9ï¸âƒ£ Try common variations you might have used.\n\nğŸ”Ÿ Enable two-factor authentication after resetting to prevent future lockouts.\n\n1ï¸âƒ£1ï¸âƒ£ Use a password manager going forward to securely store passwords.";
        }

        // Battery Drain
        if (lower.includes("battery") || lower.includes("drain") || lower.includes("charge") || lower.includes("power")) {
          return "To improve battery life:\n\n1ï¸âƒ£ Check battery usage in settings to identify power-hungry apps.\n\n2ï¸âƒ£ Lower screen brightness or enable auto-brightness.\n\n3ï¸âƒ£ Turn off Wi-Fi, Bluetooth, and location services when not needed.\n\n4ï¸âƒ£ Close background apps you're not using.\n\n5ï¸âƒ£ Enable battery saver or low power mode.\n\n6ï¸âƒ£ Reduce screen timeout duration.\n\n7ï¸âƒ£ Disable push notifications for non-essential apps.\n\n8ï¸âƒ£ Turn off keyboard vibration and haptic feedback.\n\n9ï¸âƒ£ Keep your device updated â€“ updates often include battery optimizations.\n\nğŸ”Ÿ Avoid extreme temperatures (very hot or cold).\n\n1ï¸âƒ£1ï¸âƒ£ Calibrate your battery: fully drain, then fully charge without interruption.\n\n1ï¸âƒ£2ï¸âƒ£ Check for rogue apps running in background.\n\n1ï¸âƒ£3ï¸âƒ£ If battery is old (2-3+ years), it may need replacement.";
        }

        // Blue Screen (BSOD)
        if (lower.includes("blue screen") || lower.includes("bsod") || lower.includes("stop error")) {
          return "Blue Screen of Death (BSOD) troubleshooting:\n\n1ï¸âƒ£ Note the error code displayed (e.g., 'DRIVER_IRQL_NOT_LESS_OR_EQUAL').\n\n2ï¸âƒ£ Restart your computer â€“ it might be a one-time glitch.\n\n3ï¸âƒ£ Boot into Safe Mode (press F8 during startup) to diagnose.\n\n4ï¸âƒ£ Update all drivers, especially graphics, chipset, and network drivers.\n\n5ï¸âƒ£ Run Windows Memory Diagnostic to check for RAM issues.\n\n6ï¸âƒ£ Check for Windows updates and install them.\n\n7ï¸âƒ£ Uninstall recently installed software or drivers.\n\n8ï¸âƒ£ Run System File Checker: open Command Prompt as admin and type 'sfc /scannow'.\n\n9ï¸âƒ£ Check hard drive health using CHKDSK or manufacturer tools.\n\nğŸ”Ÿ Scan for malware with Windows Defender or antivirus.\n\n1ï¸âƒ£1ï¸âƒ£ Check for overheating â€“ clean dust from fans and vents.\n\n1ï¸âƒ£2ï¸âƒ£ Test RAM by removing one stick at a time if you have multiple.\n\n1ï¸âƒ£3ï¸âƒ£ If persistent, consider System Restore to a point before issues started.";
        }

        // No Sound / Audio Issues
        if (lower.includes("sound") || lower.includes("audio") || lower.includes("speaker") || lower.includes("volume") || lower.includes("hear")) {
          return "Let's fix your audio:\n\n1ï¸âƒ£ Check volume levels â€“ system volume, app volume, and physical volume buttons.\n\n2ï¸âƒ£ Ensure you're not muted (check system tray icon and app settings).\n\n3ï¸âƒ£ Check the correct output device is selected (speakers vs headphones).\n\n4ï¸âƒ£ Unplug and replug headphones/speakers to reset the connection.\n\n5ï¸âƒ£ Restart your device.\n\n6ï¸âƒ£ Update audio drivers (Windows: Device Manager > Sound controllers).\n\n7ï¸âƒ£ Run the audio troubleshooter (Windows: Settings > System > Sound > Troubleshoot).\n\n8ï¸âƒ£ Check if audio works in different apps to isolate the issue.\n\n9ï¸âƒ£ Disable audio enhancements (Sound settings > Properties > Enhancements > Disable all).\n\nğŸ”Ÿ Check for Windows updates.\n\n1ï¸âƒ£1ï¸âƒ£ Reinstall audio drivers if updating didn't work.\n\n1ï¸âƒ£2ï¸âƒ£ Check BIOS settings to ensure audio is enabled.\n\n1ï¸âƒ£3ï¸âƒ£ Test with different speakers/headphones to rule out hardware failure.";
        }

        // Camera / Webcam Issues
        if (lower.includes("camera") || lower.includes("webcam") || lower.includes("video") || lower.includes("zoom") || lower.includes("teams")) {
          return "Let's get your camera working:\n\n1ï¸âƒ£ Check if the camera is physically covered or has a privacy shutter closed.\n\n2ï¸âƒ£ Verify camera permissions are enabled for the app (Settings > Privacy > Camera).\n\n3ï¸âƒ£ Close other apps that might be using the camera.\n\n4ï¸âƒ£ Restart the app and your device.\n\n5ï¸âƒ£ Update camera drivers (Windows: Device Manager > Cameras).\n\n6ï¸âƒ£ Check if the camera works in other apps (Camera app, browser test).\n\n7ï¸âƒ£ Disable and re-enable the camera in Device Manager.\n\n8ï¸âƒ£ Check for Windows/macOS updates.\n\n9ï¸âƒ£ Scan for malware that might be blocking camera access.\n\nğŸ”Ÿ For external webcams, try a different USB port.\n\n1ï¸âƒ£1ï¸âƒ£ Check antivirus settings â€“ some block camera access for security.\n\n1ï¸âƒ£2ï¸âƒ£ Reinstall camera drivers.\n\n1ï¸âƒ£3ï¸âƒ£ For laptops, check if there's a function key (Fn) to enable/disable camera.";
        }

        // Bluetooth Issues
        if (lower.includes("bluetooth") || lower.includes("pairing") || lower.includes("wireless") || lower.includes("headphones") || lower.includes("airpods")) {
          return "Bluetooth troubleshooting:\n\n1ï¸âƒ£ Turn Bluetooth off and on again on both devices.\n\n2ï¸âƒ£ Make sure the Bluetooth device is in pairing mode (usually a flashing light).\n\n3ï¸âƒ£ Move devices closer together (within 3 feet for pairing).\n\n4ï¸âƒ£ Forget/unpair the device and pair it again from scratch.\n\n5ï¸âƒ£ Restart both your computer/phone and the Bluetooth device.\n\n6ï¸âƒ£ Charge the Bluetooth device â€“ low battery can cause connection issues.\n\n7ï¸âƒ£ Check if the device is already connected to another device.\n\n8ï¸âƒ£ Update Bluetooth drivers (Windows: Device Manager > Bluetooth).\n\n9ï¸âƒ£ Remove other paired devices to reduce interference.\n\nğŸ”Ÿ Turn off Wi-Fi temporarily â€“ it can interfere with Bluetooth.\n\n1ï¸âƒ£1ï¸âƒ£ Check for system updates.\n\n1ï¸âƒ£2ï¸âƒ£ Reset network settings (mobile devices).\n\n1ï¸âƒ£3ï¸âƒ£ Try pairing with a different device to isolate the problem.";
        }

        // Keyboard / Mouse Issues
        if (lower.includes("keyboard") || lower.includes("mouse") || lower.includes("trackpad") || lower.includes("typing") || lower.includes("cursor")) {
          return "Keyboard/Mouse troubleshooting:\n\n1ï¸âƒ£ Check the connection â€“ USB plugged in securely or wireless receiver connected.\n\n2ï¸âƒ£ For wireless devices, replace batteries or charge them.\n\n3ï¸âƒ£ Try a different USB port.\n\n4ï¸âƒ£ Restart your computer.\n\n5ï¸âƒ£ Clean the keyboard/mouse â€“ debris can cause issues.\n\n6ï¸âƒ£ For laptops, check if an external keyboard/mouse is overriding the built-in one.\n\n7ï¸âƒ£ Update or reinstall drivers (Device Manager > Keyboards/Mice).\n\n8ï¸âƒ£ Check if Num Lock, Caps Lock, or Function Lock is causing unexpected behavior.\n\n9ï¸âƒ£ Disable Filter Keys (Windows: Settings > Ease of Access > Keyboard).\n\nğŸ”Ÿ Test with a different keyboard/mouse to rule out hardware failure.\n\n1ï¸âƒ£1ï¸âƒ£ For wireless devices, re-pair them with the receiver.\n\n1ï¸âƒ£2ï¸âƒ£ Check BIOS settings to ensure USB ports are enabled.\n\n1ï¸âƒ£3ï¸âƒ£ Scan for malware that might be interfering with input devices.";
        }

        // Storage Full
        if (lower.includes("storage") || lower.includes("disk") || lower.includes("space") || lower.includes("full") || lower.includes("memory")) {
          return "Free up storage space:\n\n1ï¸âƒ£ Empty Recycle Bin/Trash.\n\n2ï¸âƒ£ Delete old downloads, documents, and media files you no longer need.\n\n3ï¸âƒ£ Uninstall unused programs and apps.\n\n4ï¸âƒ£ Clear browser cache and cookies.\n\n5ï¸âƒ£ Use Disk Cleanup (Windows) or Optimize Storage (Mac).\n\n6ï¸âƒ£ Delete temporary files (Windows: %temp% folder).\n\n7ï¸âƒ£ Move large files to external storage or cloud services.\n\n8ï¸âƒ£ Clear app caches (especially browsers, Spotify, photo apps).\n\n9ï¸âƒ£ Remove old system restore points (keep only the most recent).\n\nğŸ”Ÿ Compress large files or folders you want to keep.\n\n1ï¸âƒ£1ï¸âƒ£ Use storage analysis tools to find what's taking up space (WinDirStat, DaisyDisk).\n\n1ï¸âƒ£2ï¸âƒ£ Delete duplicate files.\n\n1ï¸âƒ£3ï¸âƒ£ Consider upgrading to a larger drive or adding external storage.";
        }

        // Software Installation Issues
        if (lower.includes("install") || lower.includes("update") || lower.includes("download") || lower.includes("setup")) {
          return "Software installation troubleshooting:\n\n1ï¸âƒ£ Run the installer as administrator (right-click > Run as administrator).\n\n2ï¸âƒ£ Temporarily disable antivirus â€“ it might be blocking the installation.\n\n3ï¸âƒ£ Check if you have enough free disk space.\n\n4ï¸âƒ£ Download the installer again â€“ the file might be corrupted.\n\n5ï¸âƒ£ Check system requirements â€“ your device might not meet them.\n\n6ï¸âƒ£ Close all other programs before installing.\n\n7ï¸âƒ£ Restart your computer and try again.\n\n8ï¸âƒ£ Check for Windows/macOS updates first.\n\n9ï¸âƒ£ Uninstall any previous versions of the software.\n\nğŸ”Ÿ Run Windows Update troubleshooter if Windows Update is failing.\n\n1ï¸âƒ£1ï¸âƒ£ Check your internet connection for online installers.\n\n1ï¸âƒ£2ï¸âƒ£ Disable VPN during installation.\n\n1ï¸âƒ£3ï¸âƒ£ Check the software vendor's website for known installation issues.\n\n1ï¸âƒ£4ï¸âƒ£ Try installing in Safe Mode if normal mode fails.";
        }

        // Screen Issues
        if (lower.includes("screen") || lower.includes("display") || lower.includes("monitor") || lower.includes("resolution")) {
          return "Display troubleshooting:\n\n1ï¸âƒ£ Check all cable connections (HDMI, DisplayPort, VGA).\n\n2ï¸âƒ£ Try a different cable or port.\n\n3ï¸âƒ£ Adjust brightness settings.\n\n4ï¸âƒ£ Update graphics drivers.\n\n5ï¸âƒ£ Change screen resolution (Settings > Display).\n\n6ï¸âƒ£ Check if the monitor is set to the correct input source.\n\n7ï¸âƒ£ Restart your computer.\n\n8ï¸âƒ£ For multiple monitors, detect displays in settings.\n\n9ï¸âƒ£ Try the monitor with a different computer to rule out monitor issues.\n\nğŸ”Ÿ Check for Windows/macOS updates.\n\n1ï¸âƒ£1ï¸âƒ£ Disable and re-enable the display adapter in Device Manager.\n\n1ï¸âƒ£2ï¸âƒ£ Boot into Safe Mode to see if it's a driver issue.\n\n1ï¸âƒ£3ï¸âƒ£ Reset display settings to default.";
        }

        // Overheating
        if (lower.includes("hot") || lower.includes("heat") || lower.includes("overheat") || lower.includes("fan") || lower.includes("temperature")) {
          return "Overheating solutions:\n\n1ï¸âƒ£ Ensure air vents are not blocked â€“ use laptop on hard, flat surfaces.\n\n2ï¸âƒ£ Clean dust from vents and fans using compressed air.\n\n3ï¸âƒ£ Close resource-intensive programs and browser tabs.\n\n4ï¸âƒ£ Use a laptop cooling pad.\n\n5ï¸âƒ£ Check Task Manager for processes using high CPU.\n\n6ï¸âƒ£ Update BIOS and drivers.\n\n7ï¸âƒ£ Reduce screen brightness.\n\n8ï¸âƒ£ Work in a cooler environment.\n\n9ï¸âƒ£ Check if fans are running (you should hear them under load).\n\nğŸ”Ÿ Reapply thermal paste if you're comfortable opening the device (or have a professional do it).\n\n1ï¸âƒ£1ï¸âƒ£ Limit gaming or video editing sessions.\n\n1ï¸âƒ£2ï¸âƒ£ Check for malware that might be using resources.\n\n1ï¸âƒ£3ï¸âƒ£ Consider undervolting (advanced users) to reduce heat.";
        }

        // VPN Issues
        if (lower.includes("vpn") || lower.includes("virtual private")) {
          return "VPN troubleshooting:\n\n1ï¸âƒ£ Disconnect and reconnect to the VPN.\n\n2ï¸âƒ£ Try a different VPN server location.\n\n3ï¸âƒ£ Restart the VPN app.\n\n4ï¸âƒ£ Restart your device.\n\n5ï¸âƒ£ Check your internet connection without VPN first.\n\n6ï¸âƒ£ Update the VPN app to the latest version.\n\n7ï¸âƒ£ Try a different VPN protocol (OpenVPN, IKEv2, WireGuard).\n\n8ï¸âƒ£ Temporarily disable firewall or antivirus.\n\n9ï¸âƒ£ Check if your network blocks VPN traffic.\n\nğŸ”Ÿ Clear VPN app cache and data.\n\n1ï¸âƒ£1ï¸âƒ£ Reinstall the VPN app.\n\n1ï¸âƒ£2ï¸âƒ£ Check VPN subscription status.\n\n1ï¸âƒ£3ï¸âƒ£ Contact VPN support if issues persist.";
        }

        // USB Issues
        if (lower.includes("usb") || lower.includes("flash drive") || lower.includes("external drive")) {
          return "USB device troubleshooting:\n\n1ï¸âƒ£ Try a different USB port.\n\n2ï¸âƒ£ Try the device on another computer.\n\n3ï¸âƒ£ Restart your computer with the device unplugged, then plug it in.\n\n4ï¸âƒ£ Check Device Manager for errors (yellow exclamation marks).\n\n5ï¸âƒ£ Update USB drivers.\n\n6ï¸âƒ£ Check if the device appears in Disk Management (Windows) or Disk Utility (Mac).\n\n7ï¸âƒ£ Assign a drive letter if missing (Disk Management).\n\n8ï¸âƒ£ Run hardware troubleshooter.\n\n9ï¸âƒ£ Check for physical damage to the USB port or device.\n\nğŸ”Ÿ Disable USB selective suspend (Power Options > Advanced).\n\n1ï¸âƒ£1ï¸âƒ£ Update chipset drivers.\n\n1ï¸âƒ£2ï¸âƒ£ Check BIOS settings for USB configuration.";
        }

        // Default / General Response
        return "Thanks for the details. To help you better, I need a bit more information:\n\n1ï¸âƒ£ What exactly happens? (Error message, nothing happens, unexpected behavior?)\n\n2ï¸âƒ£ What device are you using? (Windows PC, Mac, iPhone, Android, etc.)\n\n3ï¸âƒ£ When did this start? (After an update, always been this way, suddenly today?)\n\n4ï¸âƒ£ What have you already tried?\n\nReply with these details and I'll provide specific step-by-step solutions. You can also click one of the category buttons above to get targeted help for common issues!";
      }

      function handleUserSubmit(text) {
        if (!text || !text.trim()) {
          showError("Please describe your tech issue so I can help.");
          return;
        }
        const cleaned = text.trim();
        addMessage("user", cleaned);
        setSending(true);

        setTimeout(() => {
          const reply = generateAssistantReply(cleaned);
          addMessage("assistant", reply);
          setSending(false);
        }, 800);
      }

      if (inputForm) {
        inputForm.addEventListener("submit", function (event) {
          event.preventDefault();
          handleUserSubmit(inputField.value);
          inputField.value = "";
          inputField.style.height = "auto";
        });
      }

      if (inputField) {
        inputField.addEventListener("input", function () {
          this.style.height = "auto";
          this.style.height = this.scrollHeight + "px";
        });
      }

      // Category buttons
      document.addEventListener("click", function (e) {
        const btn = e.target.closest(".category-btn");
        if (!btn) return;
        const prompt = btn.getAttribute("data-prompt");
        if (!prompt) return;
        if (inputField) {
          inputField.value = prompt;
          inputField.style.height = "auto";
          inputField.style.height = inputField.scrollHeight + "px";
          inputField.focus();
        }
      });

      // Back button
      if (backBtn) {
        backBtn.addEventListener("click", function() {
          // Clear all messages except the initial assistant message
          const messages = chatContainer.querySelectorAll('[data-role]');
          messages.forEach((msg, index) => {
            if (index > 0) { // Keep first message
              msg.remove();
            }
          });
          
          // Show welcome block
          if (welcomeBlock) {
            welcomeBlock.classList.remove("hidden");
          }
          
          // Hide back button
          backBtn.classList.add("hidden");
          backBtn.classList.remove("flex");
          
          // Clear input
          if (inputField) {
            inputField.value = "";
            inputField.style.height = "auto";
          }
          
          // Scroll to top
          chatContainer.scrollTop = 0;
        });
      }

      // --- Element SDK: config-driven text, colors, font, size ---

      const defaultConfig = {
        main_title: "Tech Support Assistant",
        welcome_title: "Hi, I'm your tech assistant ğŸ”§",
        welcome_body:
          "Describe what's going wrong with your computer, phone, or apps, and I'll walk you through simple, stepâ€‘byâ€‘step fixes.",
        placeholder_text: "Ask a question about your device, app, or setup...",
        primary_button_text: "Send",
        footer_text:
          "Responses are suggestions only. For sensitive systems, confirm steps with your IT team first.",
        // Colors
        background_color: "#1a1a2e",
        surface_color: "#0f3460",
        text_color: "#ffffff",
        primary_action_color: "#e94560",
        secondary_action_color: "#533483",
        // Font
        font_family: "system-ui",
        font_size: 14
      };

      async function onConfigChange(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});

        const root = document.body;
        if (root) {
          root.style.backgroundColor = cfg.background_color;
        }

        const container = document.querySelector("div.h-full.flex.flex-col");
        if (container) {
          container.style.backgroundColor = cfg.background_color;
        }

        const headers = document.querySelectorAll("header");
        headers.forEach((el) => {
          el.style.backgroundColor = cfg.surface_color;
          el.style.borderBottomColor = cfg.primary_action_color;
        });

        const footerSection = document.querySelector(
          "section[aria-label='Ask a tech support question']"
        );
        if (footerSection) {
          footerSection.style.backgroundColor = cfg.surface_color;
          footerSection.style.borderTopColor = cfg.secondary_action_color;
        }

        const textEls = document.querySelectorAll("body, p, span, label, h1, h2, button");
        textEls.forEach((el) => {
          el.style.color = cfg.text_color;
        });

        // Primary button
        if (sendBtn) {
          sendBtn.style.backgroundColor = cfg.primary_action_color;
        }

        // Back button
        if (backBtn) {
          backBtn.style.backgroundColor = cfg.secondary_action_color;
        }

        // Category buttons and some avatars
        const categoryButtons = document.querySelectorAll(".category-btn");
        categoryButtons.forEach((btn) => {
          btn.style.backgroundColor = cfg.secondary_action_color;
        });
        const assistantAvatars = document.querySelectorAll(
          ".message-avatar.bg-\\[\\#533483\\]"
        );
        assistantAvatars.forEach((el) => {
          el.style.backgroundColor = cfg.secondary_action_color;
        });

        // Text content
        if (mainTitleEl) {
          mainTitleEl.textContent = cfg.main_title || defaultConfig.main_title;
        }
        if (welcomeTitleEl) {
          welcomeTitleEl.textContent =
            cfg.welcome_title || defaultConfig.welcome_title;
        }
        if (welcomeBodyEl) {
          welcomeBodyEl.textContent =
            cfg.welcome_body || defaultConfig.welcome_body;
        }
        if (inputField) {
          inputField.placeholder =
            cfg.placeholder_text || defaultConfig.placeholder_text;
        }
        if (sendText) {
          sendText.textContent =
            cfg.primary_button_text || defaultConfig.primary_button_text;
        }
        if (footerTextEl) {
          footerTextEl.textContent =
            cfg.footer_text || defaultConfig.footer_text;
        }

        // Font + size
        const baseFont =
          (cfg.font_family && cfg.font_family.trim()) || defaultConfig.font_family;
        const baseSize = Number.isFinite(cfg.font_size)
          ? cfg.font_size
          : defaultConfig.font_size;
        const fontStack = baseFont + ", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif";

        document.documentElement.style.fontFamily = fontStack;

        if (mainTitleEl) {
          mainTitleEl.style.fontSize = baseSize * 1.7 + "px";
        }
        if (welcomeTitleEl) {
          welcomeTitleEl.style.fontSize = baseSize * 1.5 + "px";
        }
        if (welcomeBodyEl) {
          welcomeBodyEl.style.fontSize = baseSize * 1.0 + "px";
        }
        if (inputField) {
          inputField.style.fontSize = baseSize * 0.95 + "px";
        }
        const labels = document.querySelectorAll("label");
        labels.forEach((el) => {
          el.style.fontSize = baseSize * 0.85 + "px";
        });
        const smallTexts = document.querySelectorAll(
          "#cc-footer-text, .message-time"
        );
        smallTexts.forEach((el) => {
          el.style.fontSize = baseSize * 0.8 + "px";
        });
      }

      function mapToCapabilities(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});

        const recolorables = [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => {
              cfg.background_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_color: value });
              }
            }
          },
          {
            get: () => cfg.surface_color || defaultConfig.surface_color,
            set: (value) => {
              cfg.surface_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ surface_color: value });
              }
            }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => {
              cfg.text_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          },
          {
            get: () =>
              cfg.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              cfg.primary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            }
          },
          {
            get: () =>
              cfg.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              cfg.secondary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          }
        ];

        const fontEditable = {
          get: () => cfg.font_family || defaultConfig.font_family,
          set: (value) => {
            cfg.font_family = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_family: value });
            }
          }
        };

        const fontSizeable = {
          get: () => cfg.font_size || defaultConfig.font_size,
          set: (value) => {
            cfg.font_size = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        };

        return {
          recolorables,
          borderables: [],
          fontEditable,
          fontSizeable
        };
      }

      function mapToEditPanelValues(config) {
        const cfg = Object.assign({}, defaultConfig, config || {});
        return new Map([
          ["main_title", cfg.main_title],
          ["welcome_title", cfg.welcome_title],
          ["welcome_body", cfg.welcome_body],
          ["placeholder_text", cfg.placeholder_text],
          ["primary_button_text", cfg.primary_button_text],
          ["footer_text", cfg.footer_text]
        ]);
      }

      if (window.elementSdk && typeof window.elementSdk.init === "function") {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      } else {
        // Fallback: apply defaults immediately if SDK not available
        onConfigChange(defaultConfig);
      }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a10ba6c57726cda',t:'MTc2MzU2NjAxMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
